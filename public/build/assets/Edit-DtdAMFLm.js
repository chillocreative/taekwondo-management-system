import{u as w,j as e,H as P,L as C}from"./app-Cp65Qrg0.js";import{A}from"./AuthenticatedLayout-CN1ZYPxy.js";import{T as i,I as c}from"./TextInput-D_Lk62B9.js";import{I as s}from"./InputLabel-EU2-WCFw.js";import{P as S}from"./PrimaryButton-CtEKbfG9.js";import"./transition-CdX6vxSo.js";const F=["JANUARI","FEBRUARI","MAC","APRIL","MEI","JUN","JULAI","OGOS","SEPTEMBER","OKTOBER","NOVEMBER","DISEMBER"];function R({auth:b,student:l,trainingCenters:j,currentYear:_}){const{data:r,setData:t,put:v,processing:g,errors:d}=w({training_center_id:l.child?.training_center_id||"",nama_pelajar:l.nama_pelajar||"",date_of_birth:l.child?.date_of_birth||"",age:l.child?.age||"",ic_number:l.child?.ic_number||"",belt_level:l.child?.belt_level||"white",tm_number:l.child?.tm_number||"",nama_penjaga:l.nama_penjaga||"",guardian_occupation:l.child?.guardian_occupation||"",guardian_ic_number:l.child?.guardian_ic_number||"",guardian_age:l.child?.guardian_age||"",guardian_phone:l.child?.guardian_phone||"",alamat:l.alamat||"",no_tel:l.no_tel||"",phone_number:l.child?.phone_number||"",postcode:l.child?.postcode||"",city:l.child?.city||"",state:l.child?.state||"",school_name:l.child?.school_name||"",school_class:l.child?.school_class||"",kategori:l.kategori||"kanak-kanak"}),y=[{value:"white",label:"Putih"},{value:"yellow",label:"Kuning"},{value:"green",label:"Hijau"},{value:"blue",label:"Biru"},{value:"red",label:"Merah"},{value:"black_1",label:"Hitam 1 Dan"},{value:"black_2",label:"Hitam 2 Dan"},{value:"black_3",label:"Hitam 3 Dan"},{value:"black_4",label:"Hitam 4 Dan"},{value:"black_5",label:"Hitam 5 Dan"}],N=["Johor","Kedah","Kelantan","Melaka","Negeri Sembilan","Pahang","Perak","Perlis","Pulau Pinang","Sabah","Sarawak","Selangor","Terengganu","Wilayah Persekutuan (Kuala Lumpur)","Wilayah Persekutuan (Labuan)","Wilayah Persekutuan (Putrajaya)"],f=a=>{const n=a.replace(/\D/g,"").slice(0,12);let x=r.date_of_birth,m=r.age;if(n.length>=6){const o=n.substring(0,2),u=n.substring(2,4),h=n.substring(4,6),p=(parseInt(o)>new Date().getFullYear()%100?"19":"20")+o;parseInt(u)>=1&&parseInt(u)<=12&&parseInt(h)>=1&&parseInt(h)<=31&&(x=`${p}-${u}-${h}`,m=new Date().getFullYear()-parseInt(p))}t(o=>({...o,ic_number:n,date_of_birth:x,age:m,kategori:m<18?"kanak-kanak":"dewasa"}))},k=a=>{a.preventDefault(),v(route("students.update",l.id))};return e.jsxs(A,{user:b.user,header:e.jsx("h2",{className:"font-semibold text-xl text-gray-800 leading-tight",children:"Edit Maklumat Pelajar"}),children:[e.jsx(P,{title:"Edit Pelajar"}),e.jsx("div",{className:"py-12",children:e.jsx("div",{className:"max-w-5xl mx-auto sm:px-6 lg:px-8",children:e.jsx("div",{className:"bg-white overflow-hidden shadow-sm sm:rounded-lg",children:e.jsx("div",{className:"p-6",children:e.jsxs("form",{onSubmit:k,children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8 mb-8",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("h3",{className:"font-bold text-lg text-gray-800 border-b pb-2 flex items-center gap-2",children:[e.jsx("span",{children:"üë§"})," MAKLUMAT WARIS"]}),e.jsxs("div",{children:[e.jsx(s,{htmlFor:"nama_penjaga",value:"Nama Waris *"}),e.jsx(i,{id:"nama_penjaga",type:"text",className:"mt-1 block w-full uppercase",value:r.nama_penjaga,onChange:a=>t("nama_penjaga",a.target.value.toUpperCase()),required:!0}),e.jsx(c,{message:d.nama_penjaga,className:"mt-2"})]}),e.jsxs("div",{children:[e.jsx(s,{htmlFor:"guardian_occupation",value:"Pekerjaan"}),e.jsx(i,{id:"guardian_occupation",type:"text",className:"mt-1 block w-full uppercase",value:r.guardian_occupation,onChange:a=>t("guardian_occupation",a.target.value.toUpperCase())})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(s,{htmlFor:"guardian_ic_number",value:"IC Waris"}),e.jsx(i,{id:"guardian_ic_number",type:"text",className:"mt-1 block w-full",value:r.guardian_ic_number,onChange:a=>t("guardian_ic_number",a.target.value.replace(/\D/g,"").slice(0,12)),placeholder:"810101011234"})]}),e.jsxs("div",{children:[e.jsx(s,{htmlFor:"guardian_age",value:"Umur Waris"}),e.jsx(i,{id:"guardian_age",type:"number",className:"mt-1 block w-full bg-gray-50",value:r.guardian_age,readOnly:!0})]})]}),e.jsxs("div",{children:[e.jsx(s,{htmlFor:"guardian_phone",value:"No. Telefon Waris"}),e.jsx(i,{id:"guardian_phone",type:"text",className:"mt-1 block w-full",value:r.guardian_phone,onChange:a=>t("guardian_phone",a.target.value.replace(/\D/g,"").slice(0,11)),placeholder:"0123456789"})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("h3",{className:"font-bold text-lg text-gray-800 border-b pb-2 flex items-center gap-2",children:[e.jsx("span",{children:"ü•ã"})," MAKLUMAT PESERTA"]}),e.jsxs("div",{children:[e.jsx(s,{htmlFor:"nama_pelajar",value:"Nama Penuh *"}),e.jsx(i,{id:"nama_pelajar",type:"text",className:"mt-1 block w-full uppercase",value:r.nama_pelajar,onChange:a=>t("nama_pelajar",a.target.value.toUpperCase()),required:!0}),e.jsx(c,{message:d.nama_pelajar,className:"mt-2"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(s,{htmlFor:"ic_number",value:"No. IC *"}),e.jsx(i,{id:"ic_number",type:"text",className:"mt-1 block w-full",value:r.ic_number,onChange:a=>f(a.target.value),required:!0}),e.jsx(c,{message:d.ic_number,className:"mt-2"})]}),e.jsxs("div",{children:[e.jsx(s,{htmlFor:"age",value:"Umur"}),e.jsx(i,{id:"age",type:"number",className:"mt-1 block w-full bg-gray-50",value:r.age,readOnly:!0})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(s,{htmlFor:"date_of_birth",value:"Tarikh Lahir"}),e.jsx(i,{id:"date_of_birth",type:"date",className:"mt-1 block w-full bg-gray-50",value:r.date_of_birth,readOnly:!0})]}),e.jsxs("div",{children:[e.jsx(s,{htmlFor:"belt_level",value:"Tali Pinggang *"}),e.jsx("select",{id:"belt_level",className:"mt-1 block w-full border-gray-300 focus:border-indigo-500 focus:ring-indigo-500 rounded-md shadow-sm",value:r.belt_level,onChange:a=>t("belt_level",a.target.value),required:!0,children:y.map(a=>e.jsx("option",{value:a.value,children:a.label},a.value))})]})]}),e.jsxs("div",{children:[e.jsx(s,{htmlFor:"training_center_id",value:"Pusat Latihan *"}),e.jsxs("select",{id:"training_center_id",className:"mt-1 block w-full border-gray-300 focus:border-indigo-500 focus:ring-indigo-500 rounded-md shadow-sm",value:r.training_center_id,onChange:a=>t("training_center_id",a.target.value),required:!0,children:[e.jsx("option",{value:"",children:"Pilih Pusat Latihan"}),j.map(a=>e.jsx("option",{value:a.id,children:a.name},a.id))]}),e.jsx(c,{message:d.training_center_id,className:"mt-2"})]}),e.jsxs("div",{children:[e.jsx(s,{htmlFor:"tm_number",value:"No. TM (Jika ada)"}),e.jsx(i,{id:"tm_number",type:"text",className:"mt-1 block w-full",value:r.tm_number,onChange:a=>t("tm_number",a.target.value)})]})]})]}),e.jsx("hr",{className:"border-4 border-gray-50 mb-8"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8 mb-8",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("h3",{className:"font-bold text-lg text-gray-800 border-b pb-2 flex items-center gap-2",children:[e.jsx("span",{children:"üìç"})," LOKASI & HUBUNGAN"]}),e.jsxs("div",{children:[e.jsx(s,{htmlFor:"alamat",value:"Alamat *"}),e.jsx("textarea",{id:"alamat",className:"mt-1 block w-full border-gray-300 focus:border-indigo-500 focus:ring-indigo-500 rounded-md shadow-sm resize-y",value:r.alamat,onChange:a=>t("alamat",a.target.value),rows:"3",required:!0}),e.jsx(c,{message:d.alamat,className:"mt-2"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(s,{htmlFor:"postcode",value:"Poskod"}),e.jsx(i,{id:"postcode",type:"text",className:"mt-1 block w-full",value:r.postcode,onChange:a=>t("postcode",a.target.value.replace(/\D/g,"").slice(0,5))})]}),e.jsxs("div",{children:[e.jsx(s,{htmlFor:"city",value:"Bandar"}),e.jsx(i,{id:"city",type:"text",className:"mt-1 block w-full uppercase",value:r.city,onChange:a=>t("city",a.target.value.toUpperCase())})]})]}),e.jsxs("div",{children:[e.jsx(s,{htmlFor:"state",value:"Negeri"}),e.jsxs("select",{id:"state",className:"mt-1 block w-full border-gray-300 focus:border-indigo-500 focus:ring-indigo-500 rounded-md shadow-sm",value:r.state,onChange:a=>t("state",a.target.value),children:[e.jsx("option",{value:"",children:"Pilih Negeri"}),N.map(a=>e.jsx("option",{value:a,children:a},a))]})]}),e.jsxs("div",{children:[e.jsx(s,{htmlFor:"phone_number",value:"No. Telefon Peserta (Jika ada)"}),e.jsx(i,{id:"phone_number",type:"text",className:"mt-1 block w-full",value:r.phone_number,onChange:a=>t("phone_number",a.target.value.replace(/\D/g,"").slice(0,11))})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("h3",{className:"font-bold text-lg text-gray-800 border-b pb-2 flex items-center gap-2",children:[e.jsx("span",{children:"üè´"})," MAKLUMAT SEKOLAH"]}),e.jsxs("div",{children:[e.jsx(s,{htmlFor:"school_name",value:"Nama Sekolah"}),e.jsx(i,{id:"school_name",type:"text",className:"mt-1 block w-full uppercase",value:r.school_name,onChange:a=>t("school_name",a.target.value.toUpperCase())})]}),e.jsxs("div",{children:[e.jsx(s,{htmlFor:"school_class",value:"Kelas"}),e.jsx(i,{id:"school_class",type:"text",className:"mt-1 block w-full uppercase",value:r.school_class,onChange:a=>t("school_class",a.target.value.toUpperCase())})]})]})]}),l.child&&e.jsxs("div",{className:"mb-12",children:[e.jsxs("h3",{className:"text-lg font-bold text-blue-800 mb-4 flex items-center gap-2 bg-blue-50 p-3 rounded-lg border border-blue-100",children:[e.jsx("span",{children:"üí≥"})," Status Bayaran Online (Tahun ",_,")"]}),e.jsx("div",{className:"bg-white border rounded-xl overflow-hidden shadow-sm",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-4 text-left text-xs font-bold text-gray-500 uppercase tracking-wider border-r",children:"Bulan"}),e.jsx("th",{className:"px-6 py-4 text-center text-xs font-bold text-gray-500 uppercase tracking-wider border-r",children:"Status"}),e.jsx("th",{className:"px-6 py-4 text-right text-xs font-bold text-gray-500 uppercase tracking-wider border-r",children:"Tarikh Bayaran"}),e.jsx("th",{className:"px-6 py-4 text-center text-xs font-bold text-gray-500 uppercase tracking-wider",children:"Resit"})]})}),e.jsxs("tbody",{className:"divide-y divide-gray-200",children:[l.child.monthly_payments?.map((a,n)=>e.jsxs("tr",{className:a.is_paid?"bg-green-50/20":"",children:[e.jsx("td",{className:"px-6 py-4 text-sm text-gray-900 font-bold border-r",children:F[a.month-1]}),e.jsx("td",{className:"px-6 py-4 text-center border-r",children:e.jsx("span",{className:`px-3 py-1 inline-flex text-xs leading-5 font-bold rounded-full ${a.is_paid?"bg-green-100 text-green-800 border border-green-200":"bg-red-50 text-red-600 border border-red-100"}`,children:a.is_paid?"SUDAH DIBAYAR":"TERTUNGGAK"})}),e.jsx("td",{className:"px-6 py-4 text-sm text-gray-500 text-right border-r",children:a.paid_date?new Date(a.paid_date).toLocaleDateString("ms-MY"):"-"}),e.jsx("td",{className:"px-6 py-4 text-center",children:a.is_paid&&a.receipt_number?e.jsx("span",{className:"text-xs font-mono font-bold text-gray-700 bg-gray-100 px-2 py-1 rounded",children:a.receipt_number}):e.jsx("span",{className:"text-gray-400",children:"-"})})]},n)),(!l.child.monthly_payments||l.child.monthly_payments.length===0)&&e.jsx("tr",{children:e.jsx("td",{colSpan:"4",className:"px-6 py-12 text-center text-sm text-gray-500 italic",children:"Tiada rekod pembayaran online dijumpai untuk tahun ini."})})]})]})})]}),e.jsxs("div",{className:"flex items-center justify-between pt-6 border-t border-gray-100",children:[e.jsx(C,{href:route("students.index"),className:"text-gray-600 hover:text-gray-800 font-medium flex items-center gap-2 transition",children:"‚Üê Kembali ke Senarai"}),e.jsx("div",{className:"flex gap-3",children:e.jsx(S,{disabled:g,className:"px-8 py-3 bg-blue-600 hover:bg-blue-700 shadow-lg shadow-blue-200 transition",children:g?"Menyimpan...":"üíæ Simpan Perubahan"})})]})]})})})})})]})}export{R as default};
