import{r as i,j as e,H as K,a as c}from"./app-o5GHQNrA.js";import{A}from"./AuthenticatedLayout-C0ovxst7.js";import{T as L}from"./Toast-D3CaUVuv.js";import"./transition-B4ESNMh3.js";function $({auth:y,attendances:s,stats:r,filters:l,flash:d}){const[o,n]=i.useState(null),[p,b]=i.useState(l?.search||""),[g,j]=i.useState(l?.status||""),[N,v]=i.useState(l?.start_date||""),[f,k]=i.useState(l?.end_date||""),[x,u]=i.useState(null),[z,m]=i.useState(""),[w,h]=i.useState("");i.useState(()=>{d?.success?n({message:d.success,type:"success"}):d?.error&&n({message:d.error,type:"error"})},[d]);const S=t=>{t.preventDefault(),c.get(route("admin.attendance.index"),{search:p,status:g,start_date:N,end_date:f},{preserveState:!0})},C=()=>{b(""),j(""),v(""),k(""),c.get(route("admin.attendance.index"))},_=t=>{u(t.id),m(t.status),h(t.notes||"")},T=t=>{c.post(route("attendance.mark"),{student_id:s.data.find(a=>a.id===t).student_id,attendance_date:s.data.find(a=>a.id===t).attendance_date,status:z,notes:w},{onSuccess:()=>{u(null),n({message:"Kehadiran berjaya dikemaskini",type:"success"})}})},H=()=>{u(null),m(""),h("")},E=t=>{const a={hadir:"bg-emerald-100 text-emerald-800",tidak_hadir:"bg-rose-100 text-rose-800",sakit:"bg-amber-100 text-amber-800",cuti:"bg-purple-100 text-purple-800"},D={hadir:"Hadir",tidak_hadir:"Tidak Hadir",sakit:"Sakit",cuti:"Cuti"};return e.jsx("span",{className:`px-2.5 py-0.5 rounded-full text-xs font-medium ${a[t]||"bg-zinc-100 text-zinc-800"}`,children:D[t]||t})};return e.jsxs(A,{user:y.user,header:e.jsx("h2",{className:"font-bold text-2xl text-zinc-900 leading-tight",children:"Pemantauan Kehadiran"}),children:[e.jsx(K,{title:"Pemantauan Kehadiran"}),o&&e.jsx(L,{message:o.message,type:o.type,onClose:()=>n(null)}),e.jsx("div",{className:"py-12 bg-zinc-50 min-h-screen",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("h1",{className:"text-3xl font-extrabold text-zinc-900 tracking-tight mb-4",children:"Senarai Kehadiran Peserta"}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-5 gap-4 mb-6",children:[e.jsxs("div",{className:"bg-white rounded-xl border border-zinc-200 p-4",children:[e.jsx("div",{className:"text-2xl font-bold text-zinc-900",children:r.total}),e.jsx("div",{className:"text-xs text-zinc-500 uppercase tracking-wider",children:"Jumlah"})]}),e.jsxs("div",{className:"bg-emerald-50 rounded-xl border border-emerald-200 p-4",children:[e.jsx("div",{className:"text-2xl font-bold text-emerald-700",children:r.hadir}),e.jsx("div",{className:"text-xs text-emerald-600 uppercase tracking-wider",children:"Hadir"})]}),e.jsxs("div",{className:"bg-rose-50 rounded-xl border border-rose-200 p-4",children:[e.jsx("div",{className:"text-2xl font-bold text-rose-700",children:r.tidak_hadir}),e.jsx("div",{className:"text-xs text-rose-600 uppercase tracking-wider",children:"Tidak Hadir"})]}),e.jsxs("div",{className:"bg-amber-50 rounded-xl border border-amber-200 p-4",children:[e.jsx("div",{className:"text-2xl font-bold text-amber-700",children:r.sakit}),e.jsx("div",{className:"text-xs text-amber-600 uppercase tracking-wider",children:"Sakit"})]}),e.jsxs("div",{className:"bg-purple-50 rounded-xl border border-purple-200 p-4",children:[e.jsx("div",{className:"text-2xl font-bold text-purple-700",children:r.cuti}),e.jsx("div",{className:"text-xs text-purple-600 uppercase tracking-wider",children:"Cuti"})]})]})]}),e.jsx("div",{className:"bg-white rounded-2xl shadow-sm border border-zinc-200 p-6 mb-6",children:e.jsxs("form",{onSubmit:S,className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-zinc-700 mb-1",children:"Cari Peserta"}),e.jsx("input",{type:"text",value:p,onChange:t=>b(t.target.value),placeholder:"Nama atau No. Keahlian...",className:"w-full rounded-lg border-zinc-300 focus:border-blue-500 focus:ring-blue-500 text-sm"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-zinc-700 mb-1",children:"Status"}),e.jsxs("select",{value:g,onChange:t=>j(t.target.value),className:"w-full rounded-lg border-zinc-300 focus:border-blue-500 focus:ring-blue-500 text-sm",children:[e.jsx("option",{value:"",children:"Semua Status"}),e.jsx("option",{value:"hadir",children:"Hadir"}),e.jsx("option",{value:"tidak_hadir",children:"Tidak Hadir"}),e.jsx("option",{value:"sakit",children:"Sakit"}),e.jsx("option",{value:"cuti",children:"Cuti"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-zinc-700 mb-1",children:"Tarikh Mula"}),e.jsx("input",{type:"date",value:N,onChange:t=>v(t.target.value),className:"w-full rounded-lg border-zinc-300 focus:border-blue-500 focus:ring-blue-500 text-sm"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-zinc-700 mb-1",children:"Tarikh Akhir"}),e.jsx("input",{type:"date",value:f,onChange:t=>k(t.target.value),className:"w-full rounded-lg border-zinc-300 focus:border-blue-500 focus:ring-blue-500 text-sm"})]})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{type:"submit",className:"px-4 py-2 bg-black text-white rounded-lg hover:bg-zinc-800 transition-colors text-sm font-medium",children:"Tapis"}),e.jsx("button",{type:"button",onClick:C,className:"px-4 py-2 border border-zinc-300 rounded-lg text-zinc-700 hover:bg-zinc-50 transition-colors text-sm font-medium",children:"Reset"})]})]})}),e.jsxs("div",{className:"bg-white rounded-2xl shadow-xl border border-zinc-200 overflow-hidden",children:[e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-zinc-200",children:[e.jsx("thead",{className:"bg-zinc-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-4 text-left text-xs font-bold text-zinc-500 uppercase tracking-wider",children:"Tarikh"}),e.jsx("th",{className:"px-6 py-4 text-left text-xs font-bold text-zinc-500 uppercase tracking-wider",children:"No. Keahlian"}),e.jsx("th",{className:"px-6 py-4 text-left text-xs font-bold text-zinc-500 uppercase tracking-wider",children:"Nama Peserta"}),e.jsx("th",{className:"px-6 py-4 text-left text-xs font-bold text-zinc-500 uppercase tracking-wider",children:"Status"}),e.jsx("th",{className:"px-6 py-4 text-left text-xs font-bold text-zinc-500 uppercase tracking-wider",children:"Catatan"}),e.jsx("th",{className:"px-6 py-4 text-right text-xs font-bold text-zinc-500 uppercase tracking-wider",children:"Tindakan"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-zinc-100",children:s.data&&s.data.length>0?s.data.map(t=>e.jsxs("tr",{className:"hover:bg-zinc-50/50 transition duration-150",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-zinc-600",children:new Date(t.attendance_date).toLocaleDateString("ms-MY",{day:"numeric",month:"short",year:"numeric"})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-mono text-zinc-900",children:t.student_no_siri}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-zinc-900",children:t.student_name}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:x===t.id?e.jsxs("select",{value:z,onChange:a=>m(a.target.value),className:"text-sm rounded-lg border-zinc-300 focus:border-blue-500 focus:ring-blue-500",children:[e.jsx("option",{value:"hadir",children:"Hadir"}),e.jsx("option",{value:"tidak_hadir",children:"Tidak Hadir"}),e.jsx("option",{value:"sakit",children:"Sakit"}),e.jsx("option",{value:"cuti",children:"Cuti"})]}):E(t.status)}),e.jsx("td",{className:"px-6 py-4 text-sm text-zinc-500",children:x===t.id?e.jsx("input",{type:"text",value:w,onChange:a=>h(a.target.value),className:"w-full text-sm rounded-lg border-zinc-300 focus:border-blue-500 focus:ring-blue-500",placeholder:"Catatan..."}):t.notes||"-"}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:x===t.id?e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx("button",{onClick:()=>T(t.id),className:"text-emerald-600 hover:text-emerald-900 font-bold",children:"Simpan"}),e.jsx("button",{onClick:H,className:"text-zinc-600 hover:text-zinc-900 font-bold",children:"Batal"})]}):e.jsx("button",{onClick:()=>_(t),className:"text-blue-600 hover:text-blue-900 font-bold",children:"Edit"})})]},t.id)):e.jsx("tr",{children:e.jsx("td",{colSpan:"6",className:"px-6 py-16 text-center text-zinc-400",children:e.jsxs("div",{className:"flex flex-col items-center justify-center gap-2",children:[e.jsx("svg",{className:"w-12 h-12 text-zinc-300",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),e.jsx("p",{className:"font-medium",children:"Tiada rekod kehadiran dijumpai."})]})})})})]})}),s.links&&s.links.length>3&&e.jsx("div",{className:"px-6 py-4 border-t border-zinc-200 bg-zinc-50",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"text-sm text-zinc-600",children:["Menunjukkan ",s.from," hingga ",s.to," daripada ",s.total," rekod"]}),e.jsx("div",{className:"flex gap-1",children:s.links.map((t,a)=>e.jsx("button",{onClick:()=>t.url&&c.get(t.url),disabled:!t.url,className:`px-3 py-1 border rounded text-sm ${t.active?"bg-black text-white border-black":"bg-white text-zinc-700 border-zinc-300 hover:bg-zinc-50"} ${!t.url&&"opacity-50 cursor-not-allowed"}`,dangerouslySetInnerHTML:{__html:t.label}},a))})]})})]})]})})]})}export{$ as default};
