import{r,j as e,H as _,a as d}from"./app-CVSgBNqO.js";import{A as T}from"./AuthenticatedLayout-BuJGgAXh.js";import{T as A}from"./Toast-xpIJbvd-.js";import"./transition-Z3T1Vr7F.js";function J({auth:j,users:a,trainingCenters:E,filters:x,flash:c}){const[m,i]=r.useState(null),[b,h]=r.useState(x?.search||""),[p,g]=r.useState(x?.role||""),[v,o]=r.useState(!1),[l,f]=r.useState(null),[s,n]=r.useState({name:"",phone_number:"",email:"",address:"",role:"user",password:"",password_confirmation:""});r.useState(()=>{c?.success?i({message:c.success,type:"success"}):c?.error&&i({message:c.error,type:"error"})},[c]);const N=t=>{t.preventDefault(),d.get(route("admin.users.index"),{search:b,role:p},{preserveState:!0})},w=()=>{h(""),g(""),d.get(route("admin.users.index"))},y=()=>{f(null),n({name:"",phone_number:"",email:"",address:"",role:"user",password:"",password_confirmation:""}),o(!0)},z=t=>{f(t),n({name:t.name,phone_number:t.phone_number,email:t.email||"",address:t.address||"",role:t.role}),o(!0)},k=t=>{t.preventDefault(),l?d.patch(route("admin.users.update",l.id),s,{onSuccess:()=>{o(!1),i({message:"Pengguna berjaya dikemaskini",type:"success"})}}):d.post(route("admin.users.store"),s,{onSuccess:()=>{o(!1),i({message:"Pengguna berjaya ditambah",type:"success"})}})},S=t=>{confirm(`Adakah anda pasti mahu memadam pengguna ${t.name}?`)&&d.delete(route("admin.users.destroy",t.id),{onSuccess:()=>{i({message:"Pengguna berjaya dipadam",type:"success"})}})},P=t=>{const u={admin:"bg-red-100 text-red-800",coach:"bg-blue-100 text-blue-800",user:"bg-green-100 text-green-800"},C={admin:"Admin",coach:"Jurulatih",user:"Pengguna"};return e.jsx("span",{className:`px-2.5 py-0.5 rounded-full text-xs font-medium ${u[t]}`,children:C[t]})};return e.jsxs(T,{user:j.user,header:e.jsx("h2",{className:"font-bold text-2xl text-zinc-900 leading-tight",children:"Pengurusan Pengguna Sistem"}),children:[e.jsx(_,{title:"Pengurusan Pengguna"}),m&&e.jsx(A,{message:m.message,type:m.type,onClose:()=>i(null)}),e.jsx("div",{className:"py-12 bg-zinc-50 min-h-screen",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[e.jsxs("div",{className:"mb-8 flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-extrabold text-zinc-900 tracking-tight",children:"Senarai Pengguna"}),e.jsx("p",{className:"text-zinc-500 mt-1",children:"Urus pengguna sistem (Admin, Jurulatih, Pengguna)"})]}),e.jsx("button",{onClick:y,className:"px-4 py-2 bg-black text-white rounded-lg hover:bg-zinc-800 transition-colors text-sm font-medium",children:"+ Tambah Pengguna"})]}),e.jsx("div",{className:"bg-white rounded-2xl shadow-sm border border-zinc-200 p-6 mb-6",children:e.jsxs("form",{onSubmit:N,className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-zinc-700 mb-1",children:"Cari Pengguna"}),e.jsx("input",{type:"text",value:b,onChange:t=>h(t.target.value),placeholder:"Nama, telefon, atau email...",className:"w-full rounded-lg border-zinc-300 focus:border-blue-500 focus:ring-blue-500 text-sm"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-zinc-700 mb-1",children:"Peranan"}),e.jsxs("select",{value:p,onChange:t=>g(t.target.value),className:"w-full rounded-lg border-zinc-300 focus:border-blue-500 focus:ring-blue-500 text-sm",children:[e.jsx("option",{value:"",children:"Semua Peranan"}),e.jsx("option",{value:"admin",children:"Admin"}),e.jsx("option",{value:"coach",children:"Jurulatih"}),e.jsx("option",{value:"user",children:"Pengguna"})]})]})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{type:"submit",className:"px-4 py-2 bg-black text-white rounded-lg hover:bg-zinc-800 transition-colors text-sm font-medium",children:"Tapis"}),e.jsx("button",{type:"button",onClick:w,className:"px-4 py-2 border border-zinc-300 rounded-lg text-zinc-700 hover:bg-zinc-50 transition-colors text-sm font-medium",children:"Reset"})]})]})}),e.jsxs("div",{className:"bg-white rounded-2xl shadow-xl border border-zinc-200 overflow-hidden",children:[e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-zinc-200",children:[e.jsx("thead",{className:"bg-zinc-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-4 text-left text-xs font-bold text-zinc-500 uppercase tracking-wider",children:"Nama"}),e.jsx("th",{className:"px-6 py-4 text-left text-xs font-bold text-zinc-500 uppercase tracking-wider",children:"Telefon"}),e.jsx("th",{className:"px-6 py-4 text-left text-xs font-bold text-zinc-500 uppercase tracking-wider",children:"Email"}),e.jsx("th",{className:"px-6 py-4 text-left text-xs font-bold text-zinc-500 uppercase tracking-wider",children:"Peranan"}),e.jsx("th",{className:"px-6 py-4 text-right text-xs font-bold text-zinc-500 uppercase tracking-wider",children:"Tindakan"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-zinc-100",children:a.data&&a.data.length>0?a.data.map(t=>e.jsxs("tr",{className:"hover:bg-zinc-50/50 transition duration-150",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-zinc-900",children:t.name}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-mono text-zinc-600",children:t.phone_number}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-zinc-600",children:t.email||"-"}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:P(t.role)}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:e.jsxs("div",{className:"flex justify-end gap-3",children:[e.jsx("button",{onClick:()=>z(t),className:"text-blue-600 hover:text-blue-900 font-bold",children:"Edit"}),e.jsx("button",{onClick:()=>S(t),className:"text-red-600 hover:text-red-900 font-bold",children:"Padam"})]})})]},t.id)):e.jsx("tr",{children:e.jsx("td",{colSpan:"5",className:"px-6 py-16 text-center text-zinc-400",children:e.jsx("p",{className:"font-medium",children:"Tiada pengguna dijumpai."})})})})]})}),a.links&&a.links.length>3&&e.jsx("div",{className:"px-6 py-4 border-t border-zinc-200 bg-zinc-50",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"text-sm text-zinc-600",children:["Menunjukkan ",a.from," hingga ",a.to," daripada ",a.total," rekod"]}),e.jsx("div",{className:"flex gap-1",children:a.links.map((t,u)=>e.jsx("button",{onClick:()=>t.url&&d.get(t.url),disabled:!t.url,className:`px-3 py-1 border rounded text-sm ${t.active?"bg-black text-white border-black":"bg-white text-zinc-700 border-zinc-300 hover:bg-zinc-50"} ${!t.url&&"opacity-50 cursor-not-allowed"}`,dangerouslySetInnerHTML:{__html:t.label}},u))})]})})]})]})}),v&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-2xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[e.jsx("div",{className:"p-6 border-b border-zinc-200",children:e.jsx("h3",{className:"text-xl font-bold text-zinc-900",children:l?"Edit Pengguna":"Tambah Pengguna Baru"})}),e.jsxs("form",{onSubmit:k,className:"p-6 space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-zinc-700 mb-1",children:"Nama *"}),e.jsx("input",{type:"text",value:s.name,onChange:t=>n({...s,name:t.target.value}),className:"w-full rounded-lg border-zinc-300 focus:border-blue-500 focus:ring-blue-500",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-zinc-700 mb-1",children:"Nombor Telefon *"}),e.jsx("input",{type:"text",value:s.phone_number,onChange:t=>n({...s,phone_number:t.target.value}),className:"w-full rounded-lg border-zinc-300 focus:border-blue-500 focus:ring-blue-500",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-zinc-700 mb-1",children:"Email"}),e.jsx("input",{type:"email",value:s.email,onChange:t=>n({...s,email:t.target.value}),className:"w-full rounded-lg border-zinc-300 focus:border-blue-500 focus:ring-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-zinc-700 mb-1",children:"Alamat"}),e.jsx("textarea",{value:s.address,onChange:t=>n({...s,address:t.target.value}),className:"w-full rounded-lg border-zinc-300 focus:border-blue-500 focus:ring-blue-500",rows:"2"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-zinc-700 mb-1",children:"Peranan *"}),e.jsxs("select",{value:s.role,onChange:t=>n({...s,role:t.target.value}),className:"w-full rounded-lg border-zinc-300 focus:border-blue-500 focus:ring-blue-500",required:!0,children:[e.jsx("option",{value:"user",children:"Pengguna"}),e.jsx("option",{value:"coach",children:"Jurulatih"}),e.jsx("option",{value:"admin",children:"Admin"})]})]}),!l&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-zinc-700 mb-1",children:"Kata Laluan *"}),e.jsx("input",{type:"password",value:s.password,onChange:t=>n({...s,password:t.target.value}),className:"w-full rounded-lg border-zinc-300 focus:border-blue-500 focus:ring-blue-500",required:!l})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-zinc-700 mb-1",children:"Sahkan Kata Laluan *"}),e.jsx("input",{type:"password",value:s.password_confirmation,onChange:t=>n({...s,password_confirmation:t.target.value}),className:"w-full rounded-lg border-zinc-300 focus:border-blue-500 focus:ring-blue-500",required:!l})]})]}),e.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t border-zinc-200",children:[e.jsx("button",{type:"button",onClick:()=>o(!1),className:"px-4 py-2 border border-zinc-300 rounded-lg text-zinc-700 hover:bg-zinc-50 transition-colors text-sm font-medium",children:"Batal"}),e.jsx("button",{type:"submit",className:"px-4 py-2 bg-black text-white rounded-lg hover:bg-zinc-800 transition-colors text-sm font-medium",children:l?"Kemaskini":"Tambah"})]})]})]})})]})}export{J as default};
