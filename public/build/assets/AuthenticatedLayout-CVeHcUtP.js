import{j as e,r as c,L as m,b as S}from"./app-DwINWG2v.js";import{d as M}from"./transition-U5tVRYF5.js";function j({className:s}){return e.jsx("img",{src:"/images/logo_new.jpg",alt:"Kelab Taekwondo A&Z",className:s})}const b=c.createContext(),r=({children:s})=>{const[a,n]=c.useState(!1),o=()=>{n(i=>!i)};return e.jsx(b.Provider,{value:{open:a,setOpen:n,toggleOpen:o},children:e.jsx("div",{className:"relative",children:s})})},T=({children:s})=>{const{open:a,setOpen:n,toggleOpen:o}=c.useContext(b);return e.jsxs(e.Fragment,{children:[e.jsx("div",{onClick:o,children:s}),a&&e.jsx("div",{className:"fixed inset-0 z-40",onClick:()=>n(!1)})]})},P=({align:s="right",width:a="48",contentClasses:n="py-1 bg-white",children:o})=>{const{open:i,setOpen:h}=c.useContext(b);let u="origin-top";s==="left"?u="ltr:origin-top-left rtl:origin-top-right start-0":s==="right"&&(u="ltr:origin-top-right rtl:origin-top-left end-0");let d="";return a==="48"?d="w-48":a==="64"&&(d="w-64"),e.jsx(e.Fragment,{children:e.jsx(M,{show:i,enter:"transition ease-out duration-200",enterFrom:"opacity-0 scale-95",enterTo:"opacity-100 scale-100",leave:"transition ease-in duration-75",leaveFrom:"opacity-100 scale-100",leaveTo:"opacity-0 scale-95",children:e.jsx("div",{className:`absolute z-50 mt-2 rounded-md shadow-lg ${u} ${d}`,onClick:()=>h(!1),children:e.jsx("div",{className:"rounded-md ring-1 ring-black ring-opacity-5 "+n,children:o})})})})},A=({className:s="",children:a,...n})=>e.jsx(m,{...n,className:"block w-full px-4 py-2 text-start text-sm leading-5 text-gray-700 transition duration-150 ease-in-out hover:bg-gray-100 focus:bg-gray-100 focus:outline-none "+s,children:a});r.Trigger=T;r.Content=P;r.Link=A;function $({header:s,children:a}){const n=S().props.auth.user,[o,i]=c.useState(!1),[h,u]=c.useState(null),[d,v]=c.useState([]),[g,N]=c.useState(0),[z,f]=c.useState(!1),w=(()=>{const t=[{name:"Dashboard",icon:"ðŸ ",route:"dashboard",active:route().current("dashboard")}],l=[{name:"Pengurusan",icon:"âš™ï¸",submenu:[{name:"Pelajar",route:"students.index",active:route().current("students.*")},{name:"Kehadiran",route:"admin.attendance.index",active:route().current("admin.attendance.*")},{name:"Pusat Latihan",route:"training-centers.index",active:route().current("training-centers.*")},{name:"Pengguna Sistem",route:"admin.users.index",active:route().current("admin.users.*")}]},{name:"Kewangan",icon:"ðŸ’°",submenu:[{name:"Senarai Pembayaran",route:"admin.payments.index",active:route().current("admin.payments.*")},{name:"Konfigurasi Yuran",route:"settings.fees.index",active:route().current("settings.fees.*")}]},{name:"Whatsapp",icon:"ðŸ’¬",route:"admin.whatsapp",active:route().current("admin.whatsapp")},{name:"Grading",icon:"ðŸ¥‹",route:"admin.grading",active:route().current("admin.grading")},{name:"Tournament",icon:"ðŸ†",route:"admin.tournament",active:route().current("admin.tournament")},{name:"Tetapan",icon:"ðŸ”§",submenu:[{name:"Pembayaran",route:"settings.payment",active:route().current("settings.payment")}]}],p=[{name:"Kehadiran",icon:"ðŸ“‹",route:"coach.attendance.index",active:route().current("coach.attendance.*")},{name:"Pengurusan",icon:"ðŸ‘¥",submenu:[{name:"Pelajar",route:"coach.students.index",active:route().current("coach.students.*")},{name:"Kehadiran",route:"admin.attendance.index",active:route().current("admin.attendance.*")},{name:"Yuran",route:"coach.payments.index",active:route().current("coach.payments.*")}]}],x=[{name:"Nama Peserta",icon:"ðŸ‘¨â€ðŸ‘©â€ðŸ‘§â€ðŸ‘¦",route:"children.index",active:route().current("children.*")},{name:"Kehadiran",icon:"ðŸ“‹",route:"attendance.index",active:route().current("attendance.*")},{name:"Penyata Tahunan",icon:"ðŸ“Š",route:"annual-statement.index",active:route().current("annual-statement.*")}];return n.role==="admin"?[...t,...l]:n.role==="coach"?[...t,...p]:[...t,...x]})();c.useEffect(()=>{if(n.role==="admin"){y();const t=setInterval(y,3e4);return()=>clearInterval(t)}},[n.role]);const y=async()=>{try{const t=await axios.get("/notifications");v(t.data.notifications||[]),N(t.data.unread_count||0)}catch(t){console.error("Error fetching notifications:",t)}},C=async()=>{try{await axios.post("/notifications/mark-all-read"),v([]),N(0),f(!1)}catch(t){console.error("Error marking notifications as read:",t)}},L=t=>{u(h===t?null:t)},k=({item:t,isMobile:l=!1})=>{if(t.submenu){const p=h===t.name;return e.jsxs("div",{children:[e.jsxs("button",{onClick:()=>L(t.name),className:`w-full flex items-center justify-between px-4 py-3 text-sm font-medium rounded-lg transition-colors ${l?"text-zinc-700 hover:bg-zinc-100":"text-zinc-600 hover:bg-zinc-100 hover:text-zinc-900"}`,children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("span",{className:"text-lg",children:t.icon}),e.jsx("span",{children:t.name})]}),e.jsx("svg",{className:`w-4 h-4 transition-transform ${p?"rotate-180":""}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M19 9l-7 7-7-7"})})]}),p&&e.jsx("div",{className:"ml-4 mt-1 space-y-1",children:t.submenu.map(x=>e.jsx(m,{href:route(x.route),className:`flex items-center px-4 py-2 text-sm rounded-lg transition-colors ${x.active?"bg-black text-white":"text-zinc-600 hover:bg-zinc-100 hover:text-zinc-900"}`,onClick:()=>l&&i(!1),children:x.name},x.name))})]})}return e.jsxs(m,{href:route(t.route),className:`flex items-center gap-3 px-4 py-3 text-sm font-medium rounded-lg transition-colors ${t.active?"bg-black text-white":l?"text-zinc-700 hover:bg-zinc-100":"text-zinc-600 hover:bg-zinc-100 hover:text-zinc-900"}`,onClick:()=>l&&i(!1),children:[e.jsx("span",{className:"text-lg",children:t.icon}),e.jsx("span",{children:t.name})]})};return e.jsxs("div",{className:"min-h-screen bg-zinc-50",children:[e.jsx("div",{className:"lg:hidden fixed top-0 left-0 right-0 z-50 bg-white border-b border-zinc-200",children:e.jsxs("div",{className:"flex items-center justify-between px-4 h-16",children:[e.jsx("button",{onClick:()=>i(!o),className:"p-2 rounded-lg text-zinc-600 hover:bg-zinc-100",children:e.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M4 6h16M4 12h16M4 18h16"})})}),e.jsx(m,{href:"/",children:e.jsx(j,{className:"h-10 w-10 rounded-full"})}),e.jsxs(r,{children:[e.jsx(r.Trigger,{children:e.jsx("button",{className:"flex items-center gap-2 p-2 rounded-lg hover:bg-zinc-50",children:e.jsx("div",{className:"h-8 w-8 rounded-full bg-zinc-200 flex items-center justify-center text-zinc-600 font-bold text-sm",children:n?.name?.charAt(0)?.toUpperCase()||"?"})})}),e.jsxs(r.Content,{align:"right",width:"56",contentClasses:"py-2 bg-white shadow-xl rounded-xl border border-zinc-100",children:[e.jsxs("div",{className:"px-4 py-3 border-b border-zinc-100",children:[e.jsx("p",{className:"text-sm font-semibold text-zinc-900 truncate",children:n?.name||"-"}),e.jsx("p",{className:"text-xs text-zinc-500 truncate",children:n?.phone_number||"-"})]}),e.jsxs(r.Link,{href:route("profile.edit"),className:"flex items-center gap-3 px-4 py-2 text-sm text-zinc-700 hover:bg-zinc-50",children:[e.jsx("span",{children:"ðŸ‘¤"}),e.jsx("span",{children:"Profil Saya"})]}),e.jsx("div",{className:"border-t border-zinc-100 my-1"}),e.jsxs(r.Link,{href:route("logout"),method:"post",as:"button",className:"flex items-center gap-3 px-4 py-2 text-sm text-red-600 hover:bg-red-50 w-full text-left",children:[e.jsx("span",{children:"ðŸšª"}),e.jsx("span",{children:"Log Keluar"})]})]})]})]})}),e.jsx("aside",{className:"hidden lg:fixed lg:inset-y-0 lg:flex lg:w-64 lg:flex-col",children:e.jsxs("div",{className:"flex flex-col flex-grow bg-white border-r border-zinc-200 overflow-y-auto",children:[e.jsx("div",{className:"flex items-center gap-3 px-6 py-6 border-b border-zinc-100",children:e.jsxs(m,{href:"/",className:"flex items-center gap-3",children:[e.jsx(j,{className:"h-12 w-12 rounded-full"}),e.jsx("div",{children:e.jsx("h1",{className:"text-lg font-bold text-zinc-900",children:"Taekwondo A&Z"})})]})}),e.jsx("nav",{className:"flex-1 px-4 py-6 space-y-2",children:w.map(t=>e.jsx(k,{item:t},t.name))})]})}),o&&e.jsx("div",{className:"lg:hidden fixed inset-0 z-40 bg-black bg-opacity-50",onClick:()=>i(!1)}),e.jsx("aside",{className:`lg:hidden fixed inset-y-0 left-0 z-50 w-64 bg-white transform transition-transform duration-300 ease-in-out ${o?"translate-x-0":"-translate-x-full"}`,children:e.jsxs("div",{className:"flex flex-col h-full",children:[e.jsxs("div",{className:"flex items-center justify-between px-6 py-4 border-b border-zinc-100",children:[e.jsxs(m,{href:"/",className:"flex items-center gap-3",onClick:()=>i(!1),children:[e.jsx(j,{className:"h-10 w-10 rounded-full"}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-base font-bold text-zinc-900",children:"TSMS"}),e.jsx("p",{className:"text-xs text-zinc-500",children:"Taekwondo A&Z"})]})]}),e.jsx("button",{onClick:()=>i(!1),className:"p-2 rounded-lg text-zinc-600 hover:bg-zinc-100",children:e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M6 18L18 6M6 6l12 12"})})})]}),e.jsx("nav",{className:"flex-1 px-4 py-6 space-y-2 overflow-y-auto",children:w.map(t=>e.jsx(k,{item:t,isMobile:!0},t.name))})]})}),e.jsxs("div",{className:"lg:pl-64",children:[e.jsx("div",{className:"hidden lg:block sticky top-0 z-30 bg-white border-b border-zinc-100",children:e.jsxs("div",{className:"flex items-center justify-end gap-4 px-6 h-16",children:[n.role==="admin"&&e.jsxs("div",{className:"relative",children:[e.jsxs("button",{onClick:()=>f(!z),className:"relative p-2 rounded-lg hover:bg-zinc-100 transition-colors",children:[e.jsx("svg",{className:"w-6 h-6 text-zinc-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 17h5l-1.405-1.405A2.032 2.032 0 0118 14.158V11a6.002 6.002 0 00-4-5.659V5a2 2 0 10-4 0v.341C7.67 6.165 6 8.388 6 11v3.159c0 .538-.214 1.055-.595 1.436L4 17h5m6 0v1a3 3 0 11-6 0v-1m6 0H9"})}),g>0&&e.jsx("span",{className:"absolute top-1 right-1 h-4 w-4 bg-red-500 rounded-full text-white text-[10px] flex items-center justify-center font-bold",children:g>9?"9+":g})]}),z&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"fixed inset-0 z-40",onClick:()=>f(!1)}),e.jsxs("div",{className:"absolute right-0 mt-2 w-96 bg-white rounded-xl shadow-xl border border-zinc-200 z-50",children:[e.jsxs("div",{className:"p-4 border-b border-zinc-200 flex items-center justify-between",children:[e.jsx("h3",{className:"font-bold text-zinc-900",children:"Notifikasi"}),d.length>0&&e.jsx("button",{onClick:C,className:"text-xs text-blue-600 hover:text-blue-800 font-medium",children:"Tandakan Semua Dibaca"})]}),e.jsx("div",{className:"max-h-96 overflow-y-auto",children:d.length===0?e.jsxs("div",{className:"p-8 text-center",children:[e.jsx("svg",{className:"w-16 h-16 mx-auto text-zinc-300 mb-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 17h5l-1.405-1.405A2.032 2.032 0 0118 14.158V11a6.002 6.002 0 00-4-5.659V5a2 2 0 10-4 0v.341C7.67 6.165 6 8.388 6 11v3.159c0 .538-.214 1.055-.595 1.436L4 17h5m6 0v1a3 3 0 11-6 0v-1m6 0H9"})}),e.jsx("p",{className:"text-sm text-zinc-500",children:"Tiada notifikasi baharu"})]}):d.map((t,l)=>e.jsx("div",{className:"p-4 border-b border-zinc-100 hover:bg-zinc-50 cursor-pointer transition-colors",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:`w-2 h-2 rounded-full mt-2 flex-shrink-0 ${t.type==="registration"?"bg-blue-500":t.type==="payment_due"?"bg-amber-500":t.type==="absent"?"bg-red-500":"bg-green-500"}`}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-sm font-medium text-zinc-900",children:t.title}),e.jsx("p",{className:"text-xs text-zinc-600 mt-1",children:t.message}),e.jsx("p",{className:"text-xs text-zinc-400 mt-1",children:t.time})]})]})},l))})]})]})]}),e.jsxs(r,{children:[e.jsx(r.Trigger,{children:e.jsxs("button",{className:"flex items-center gap-3 px-3 py-2 rounded-lg hover:bg-zinc-50 transition-colors",children:[e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-sm font-semibold text-zinc-900",children:n?.name||"-"}),e.jsx("p",{className:"text-xs text-zinc-500",children:n?.phone_number||"-"})]}),e.jsx("div",{className:"h-10 w-10 rounded-full bg-zinc-200 flex items-center justify-center text-zinc-600 font-bold",children:n?.name?.charAt(0)?.toUpperCase()||"?"}),e.jsx("svg",{className:"w-4 h-4 text-zinc-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M19 9l-7 7-7-7"})})]})}),e.jsxs(r.Content,{align:"right",width:"56",contentClasses:"py-2 bg-white shadow-xl rounded-xl border border-zinc-100",children:[e.jsxs("div",{className:"px-4 py-3 border-b border-zinc-100",children:[e.jsx("p",{className:"text-sm font-semibold text-zinc-900",children:n?.name||"-"}),e.jsx("p",{className:"text-xs text-zinc-500",children:n?.phone_number||"-"}),n?.training_center&&e.jsx("p",{className:"text-xs text-zinc-400 mt-1",children:n?.training_center?.name||"-"})]}),e.jsxs(r.Link,{href:route("profile.edit"),className:"flex items-center gap-3 px-4 py-2 text-sm text-zinc-700 hover:bg-zinc-50",children:[e.jsx("span",{children:"ðŸ‘¤"}),e.jsx("span",{children:"Profil Saya"})]}),e.jsx("div",{className:"border-t border-zinc-100 my-1"}),e.jsxs(r.Link,{href:route("logout"),method:"post",as:"button",className:"flex items-center gap-3 px-4 py-2 text-sm text-red-600 hover:bg-red-50 w-full text-left",children:[e.jsx("span",{children:"ðŸšª"}),e.jsx("span",{children:"Log Keluar"})]})]})]})]})}),s&&e.jsx("header",{className:"bg-white border-b border-zinc-100 mt-16 lg:mt-0",children:e.jsx("div",{className:"px-4 py-6 sm:px-6 lg:px-8",children:s})}),e.jsx("main",{className:"mt-16 lg:mt-0",children:a})]})]})}export{$ as A};
