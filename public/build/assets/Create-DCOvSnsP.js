import{r as d,j as e,H as S,L as B,a as T}from"./app-DInu4_fA.js";import{A as I}from"./AuthenticatedLayout-B5P5xPKS.js";import{T as g,I as u}from"./TextInput-DPWtleBB.js";import{I as h}from"./InputLabel-BnDPdHOD.js";import{P}from"./PrimaryButton-C813ND1u.js";import"./transition-Bt5EQbGU.js";const f=["JANUARI 2025","FEBRUARI 2025","MAC 2025","APRIL 2025","MEI 2025","JUN 2025","JULAI 2025","OGOS 2025","SEPTEMBER 2025","OKTOBER 2025","NOVEMBER 2025","DISEMBER 2025"];function U({auth:y}){const[l,N]=d.useState(Array(12).fill(0)),[i,v]=d.useState(Array(12).fill("kanak-kanak")),[j,p]=d.useState(!1),[m,w]=d.useState({}),[n,k]=d.useState({nama_pelajar:"",nama_penjaga:"",alamat:"",no_tel:""}),o=a=>i[a]==="kanak-kanak"?30:50,b=()=>l.reduce((a,t,s)=>a+t*o(s),0),_=()=>l.filter(a=>a>0).length,C=()=>{const a=i.filter((t,s)=>l[s]>0);if(a.length>0){const t=a.filter(r=>r==="kanak-kanak").length,s=a.filter(r=>r==="dewasa").length;return t>=s?"kanak-kanak":"dewasa"}return"kanak-kanak"},A=(a,t)=>{const s=t.replace(/\D/g,"").slice(0,2),r=[...l];r[a]=parseInt(s)||0,N(r)},E=(a,t)=>{const s=[...i];s[a]=t,v(s)},x=(a,t)=>{k(s=>({...s,[a]:t}))},M=a=>{a.preventDefault(),p(!0);const t=f.map((r,c)=>({month:r,kategori:i[c],quantity:l[c],amount:o(c),total:l[c]*o(c)})),s={nama_pelajar:n.nama_pelajar,nama_penjaga:n.nama_penjaga,alamat:n.alamat,no_tel:n.no_tel,kategori:C(),status_bayaran:_(),payment_details:t};T.post(route("students.store"),s,{onSuccess:()=>{p(!1)},onError:r=>{w(r),p(!1)}})};return e.jsxs(I,{user:y.user,header:e.jsx("h2",{className:"font-semibold text-xl text-gray-800 leading-tight",children:"Tambah Pelajar Baru"}),children:[e.jsx(S,{title:"Tambah Pelajar Baru"}),e.jsx("div",{className:"py-12",children:e.jsx("div",{className:"max-w-5xl mx-auto sm:px-6 lg:px-8",children:e.jsx("div",{className:"bg-white overflow-hidden shadow-sm sm:rounded-lg",children:e.jsx("div",{className:"p-6",children:e.jsxs("form",{onSubmit:M,children:[e.jsxs("div",{className:"mb-8",children:[e.jsxs("div",{className:"flex justify-between items-start mb-6",children:[e.jsx("div",{children:e.jsx("h2",{className:"text-2xl font-bold text-gray-800",children:"Maklumat Pelajar Baru"})}),e.jsxs("div",{className:"text-right",children:[e.jsx("div",{className:"text-sm text-gray-500",children:"No Siri:"}),e.jsx("div",{className:"text-xl font-bold text-gray-400",children:"Auto"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-4",children:[e.jsxs("div",{children:[e.jsx(h,{htmlFor:"nama_pelajar",value:"Nama Pelajar *"}),e.jsx(g,{id:"nama_pelajar",type:"text",className:"mt-1 block w-full",value:n.nama_pelajar,onChange:a=>x("nama_pelajar",a.target.value.toUpperCase()),required:!0,placeholder:"Nama penuh pelajar"}),e.jsx(u,{message:m.nama_pelajar,className:"mt-2"})]}),e.jsxs("div",{children:[e.jsx(h,{htmlFor:"no_tel",value:"No. Telefon *"}),e.jsx(g,{id:"no_tel",type:"text",inputMode:"numeric",className:"mt-1 block w-full",value:n.no_tel,onChange:a=>x("no_tel",a.target.value.replace(/\D/g,"")),required:!0,placeholder:"Contoh: 0123456789"}),e.jsx(u,{message:m.no_tel,className:"mt-2"})]})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx(h,{htmlFor:"nama_penjaga",value:"Nama Penjaga *"}),e.jsx(g,{id:"nama_penjaga",type:"text",className:"mt-1 block w-full",value:n.nama_penjaga,onChange:a=>x("nama_penjaga",a.target.value.toUpperCase()),required:!0,placeholder:"Nama ibu bapa / penjaga"}),e.jsx(u,{message:m.nama_penjaga,className:"mt-2"})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx(h,{htmlFor:"alamat",value:"Alamat *"}),e.jsx("textarea",{id:"alamat",className:"mt-1 block w-full border-gray-300 focus:border-indigo-500 focus:ring-indigo-500 rounded-md shadow-sm resize-y",value:n.alamat,onChange:a=>x("alamat",a.target.value),rows:"3",style:{minHeight:"80px"},required:!0,placeholder:"Alamat lengkap"}),e.jsx(u,{message:m.alamat,className:"mt-2"})]})]}),e.jsxs("div",{className:"mb-8",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-4",children:"Butiran Pembayaran"}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-blue-500",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left text-xs font-bold text-white uppercase tracking-wider",children:"Butiran Pembayaran"}),e.jsx("th",{className:"px-4 py-3 text-center text-xs font-bold text-white uppercase tracking-wider",children:"Kategori"}),e.jsx("th",{className:"px-4 py-3 text-right text-xs font-bold text-white uppercase tracking-wider",children:"Jumlah Bayaran"}),e.jsx("th",{className:"px-4 py-3 text-center text-xs font-bold text-white uppercase tracking-wider",children:"Kuantiti"}),e.jsx("th",{className:"px-4 py-3 text-right text-xs font-bold text-white uppercase tracking-wider",children:"Total"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:f.map((a,t)=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-4 py-3 whitespace-nowrap text-sm text-gray-900",children:a}),e.jsx("td",{className:"px-4 py-3 whitespace-nowrap text-center",children:e.jsxs("select",{value:i[t],onChange:s=>E(t,s.target.value),className:"text-sm border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500",children:[e.jsx("option",{value:"kanak-kanak",children:"Kanak-kanak"}),e.jsx("option",{value:"dewasa",children:"Dewasa"})]})}),e.jsxs("td",{className:"px-4 py-3 whitespace-nowrap text-sm text-gray-900 text-right",children:["RM",o(t).toFixed(2)]}),e.jsx("td",{className:"px-4 py-3 whitespace-nowrap text-center",children:e.jsx("input",{type:"text",inputMode:"numeric",pattern:"[0-9]*",maxLength:"2",value:l[t]||"",onChange:s=>A(t,s.target.value),className:"w-12 text-center border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500 text-sm",placeholder:""})}),e.jsxs("td",{className:"px-4 py-3 whitespace-nowrap text-sm text-gray-900 text-right font-medium",children:["RM",(l[t]*o(t)).toFixed(2)]})]},t))})]})}),e.jsx("div",{className:"mt-4 flex justify-end",children:e.jsxs("div",{className:"w-64",children:[e.jsxs("div",{className:"flex justify-between py-2 border-b",children:[e.jsx("span",{className:"font-semibold text-gray-600",children:"SUBTOTAL"}),e.jsxs("span",{className:"font-semibold",children:["RM ",b().toFixed(2)]})]}),e.jsxs("div",{className:"flex justify-between py-2",children:[e.jsx("span",{className:"font-bold text-gray-800",children:"TOTAL"}),e.jsxs("span",{className:"font-bold text-gray-800",children:["RM ",b().toFixed(2)]})]})]})})]}),e.jsxs("div",{className:"flex items-center justify-between pt-4 border-t",children:[e.jsx(B,{href:route("students.index"),className:"bg-gray-500 hover:bg-gray-700 text-white font-bold py-2 px-4 rounded transition duration-200",children:"‚Üê Kembali"}),e.jsx(P,{disabled:j,children:j?"Menyimpan...":"üíæ Simpan"})]})]})})})})})]})}export{U as default};
