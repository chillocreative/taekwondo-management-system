import{r as x,u,j as e,H as j,a as v}from"./app-5R4Pz2zG.js";import{A as N}from"./AuthenticatedLayout-DTSJoclw.js";import{T as z}from"./Toast-CCE-MMS7.js";import"./transition-BJJQMnWm.js";function S({auth:b,settings:a,flash:o}){const[p,i]=x.useState(!1),[l,d]=x.useState(null);x.useEffect(()=>{o?.success?d({message:o.success,type:"success"}):o?.error&&d({message:o.error,type:"error"})},[o]);const{data:r,setData:n,post:g,processing:m,errors:c}=u({provider:a?.provider||"toyyibpay",is_sandbox:a?.is_sandbox??!0,secret_key:a?.secret_key||"",category_code:a?.category_code||"",is_active:a?.is_active??!1}),s=u({catname:"",catdescription:""}),y=t=>{t.preventDefault(),g(route("settings.payment.update"))},h=t=>{t.preventDefault(),s.post(route("settings.payment.create-category"),{onSuccess:()=>{i(!1),s.reset()}})},f=()=>{v.post(route("settings.payment.test"))};return e.jsxs(N,{user:b.user,header:e.jsx("h2",{className:"text-xl sm:text-2xl font-semibold leading-tight text-zinc-900",children:"Payment Settings"}),children:[e.jsx(j,{title:"Payment Settings"}),l&&e.jsx(z,{message:l.message,type:l.type,onClose:()=>d(null)}),e.jsx("div",{className:"py-6 sm:py-12 bg-zinc-50 min-h-screen",children:e.jsx("div",{className:"mx-auto max-w-4xl px-4 sm:px-6",children:e.jsxs("div",{className:"bg-white rounded-xl border border-zinc-200 shadow-sm p-6 mb-6",children:[e.jsx("h3",{className:"text-lg font-bold text-zinc-900 mb-6",children:"ToyyibPay Configuration"}),e.jsx("form",{onSubmit:y,children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-zinc-700 mb-2",children:"Payment Provider"}),e.jsx("select",{value:r.provider,onChange:t=>n("provider",t.target.value),className:"w-full px-3 py-2 border border-zinc-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:e.jsx("option",{value:"toyyibpay",children:"ToyyibPay"})})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("input",{type:"checkbox",checked:r.is_sandbox,onChange:t=>n("is_sandbox",t.target.checked),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-zinc-300 rounded"}),e.jsx("label",{className:"text-sm font-medium text-zinc-700",children:"Sandbox Mode (Development)"})]}),r.is_sandbox&&e.jsx("div",{className:"bg-amber-50 border border-amber-200 rounded-lg p-4",children:e.jsxs("p",{className:"text-sm text-amber-800",children:[e.jsx("strong",{children:"Sandbox Mode:"})," Register at"," ",e.jsx("a",{href:"https://dev.toyyibpay.com",target:"_blank",rel:"noopener noreferrer",className:"underline",children:"dev.toyyibpay.com"})," ","to get your sandbox credentials."]})}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-zinc-700 mb-2",children:"User Secret Key *"}),e.jsx("input",{type:"text",value:r.secret_key,onChange:t=>n("secret_key",t.target.value),className:"w-full px-3 py-2 border border-zinc-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent font-mono text-sm",placeholder:"e.g., w5x7srq7-rx5r-3t89-2ou2-k7361x2jewhn",required:!0}),c.secret_key&&e.jsx("p",{className:"text-red-500 text-xs mt-1",children:c.secret_key}),e.jsx("p",{className:"text-xs text-zinc-500 mt-1",children:"Get this from your ToyyibPay account settings"})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between items-center mb-2",children:[e.jsx("label",{className:"block text-sm font-medium text-zinc-700",children:"Category Code"}),e.jsx("button",{type:"button",onClick:()=>i(!0),className:"text-sm text-blue-600 hover:text-blue-800 font-medium",children:"+ Create Category"})]}),e.jsx("input",{type:"text",value:r.category_code,onChange:t=>n("category_code",t.target.value),className:"w-full px-3 py-2 border border-zinc-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent font-mono text-sm",placeholder:"e.g., j0tzqhka"}),c.category_code&&e.jsx("p",{className:"text-red-500 text-xs mt-1",children:c.category_code}),e.jsx("p",{className:"text-xs text-zinc-500 mt-1",children:"Category groups your bills together"})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("input",{type:"checkbox",checked:r.is_active,onChange:t=>n("is_active",t.target.checked),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-zinc-300 rounded"}),e.jsx("label",{className:"text-sm font-medium text-zinc-700",children:"Enable Payment Gateway"})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 pt-4 border-t border-zinc-200",children:[e.jsx("button",{type:"submit",disabled:m,className:"flex-1 px-4 py-2 bg-black text-white rounded-lg hover:bg-zinc-800 transition-colors disabled:opacity-50 text-sm font-medium",children:m?"Saving...":"Save Settings"}),e.jsx("button",{type:"button",onClick:f,className:"px-4 py-2 border border-zinc-300 rounded-lg text-zinc-700 hover:bg-zinc-50 transition-colors text-sm font-medium",children:"Test Connection"})]})]})})]})})}),p&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-xl p-6 max-w-md w-full",children:[e.jsx("h3",{className:"text-lg font-bold text-zinc-900 mb-4",children:"Create ToyyibPay Category"}),e.jsxs("form",{onSubmit:h,children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-zinc-700 mb-1",children:"Category Name *"}),e.jsx("input",{type:"text",value:s.data.catname,onChange:t=>s.setData("catname",t.target.value),className:"w-full px-3 py-2 border border-zinc-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent text-sm",placeholder:"e.g., Taekwondo Fees",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-zinc-700 mb-1",children:"Description *"}),e.jsx("textarea",{value:s.data.catdescription,onChange:t=>s.setData("catdescription",t.target.value),className:"w-full px-3 py-2 border border-zinc-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent text-sm",rows:"3",placeholder:"e.g., Monthly fees for Taekwondo classes",required:!0})]})]}),e.jsxs("div",{className:"mt-6 flex flex-col-reverse sm:flex-row justify-end gap-3",children:[e.jsx("button",{type:"button",onClick:()=>i(!1),className:"px-4 py-2 border border-zinc-300 rounded-lg text-zinc-700 hover:bg-zinc-50 transition-colors text-sm",children:"Cancel"}),e.jsx("button",{type:"submit",disabled:s.processing,className:"px-4 py-2 bg-black text-white rounded-lg hover:bg-zinc-800 transition-colors disabled:opacity-50 text-sm",children:s.processing?"Creating...":"Create Category"})]})]})]})})]})}export{S as default};
