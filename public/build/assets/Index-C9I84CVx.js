import{b as A,r as _,u as E,j as e,H as F,a as $}from"./app-D-Q5L2DT.js";import{A as K}from"./AuthenticatedLayout-QdI5H6rn.js";import"./transition-BoFCqZBQ.js";function V({auth:N,children:b,trainingCenters:L}){const{flash:m}=A().props,[D,w]=_.useState(!1),[d,v]=_.useState(null),[x,h]=_.useState({show:!1,type:"success",message:""});_.useEffect(()=>{if(m?.payment_success?h({show:!0,type:"success",message:m.payment_success}):m?.payment_error&&h({show:!0,type:"error",message:m.payment_error}),m?.payment_success||m?.payment_error){const t=setTimeout(()=>{h(a=>({...a,show:!1}))},3e3);return()=>clearTimeout(t)}},[m]);const M=t=>{if(!t.payment_completed)return!1;if(!t.payment_date)return t.payment_completed;const a=new Date(t.payment_date).getFullYear(),n=new Date().getFullYear();return a===n},T=["Johor","Kedah","Kelantan","Melaka","Negeri Sembilan","Pahang","Perak","Perlis","Pulau Pinang","Sabah","Sarawak","Selangor","Terengganu","Wilayah Persekutuan (Kuala Lumpur)","Wilayah Persekutuan (Labuan)","Wilayah Persekutuan (Putrajaya)"],{data:r,setData:s,post:Y,put:U,delete:H,processing:z,errors:c,reset:k}=E({training_center_id:"",name:"",date_of_birth:"",age:"",ic_number:"",belt_level:"white",is_active:!0,from_other_club:!1,tm_number:"",belt_certificate:null,guardian_name:"",guardian_occupation:"",guardian_ic_number:"",guardian_age:"",guardian_phone:"",phone_number:"",address:"",postcode:"",city:"",state:"",school_name:"",school_class:""}),C=[{value:"white",label:"Putih"},{value:"yellow",label:"Kuning"},{value:"green",label:"Hijau"},{value:"blue",label:"Biru"},{value:"red",label:"Merah"},{value:"black_1",label:"Hitam 1 Dan"},{value:"black_2",label:"Hitam 2 Dan"},{value:"black_3",label:"Hitam 3 Dan"},{value:"black_4",label:"Hitam 4 Dan"},{value:"black_5",label:"Hitam 5 Dan"}],y=(t=null)=>{if(t){v(t);let a=t.date_of_birth||"";if(t.ic_number&&t.ic_number.length>=6){const n=t.ic_number.replace(/\D/g,"");if(n.length>=6){const l=n.substring(0,2),i=n.substring(2,4),o=n.substring(4,6),p=new Date().getFullYear()%100,g=(parseInt(l)>p?"19":"20")+l,P=parseInt(i),S=parseInt(o);P>=1&&P<=12&&S>=1&&S<=31&&(a=`${g}-${i}-${o}`)}}if(s({training_center_id:t.training_center_id||"",name:t.name,date_of_birth:a,ic_number:t.ic_number||"",belt_level:t.belt_level,is_active:t.is_active,from_other_club:t.from_other_club||!1,tm_number:t.tm_number||"",belt_certificate:null,guardian_name:t.guardian_name||"",guardian_occupation:t.guardian_occupation||"",guardian_ic_number:t.guardian_ic_number||"",guardian_age:t.guardian_age||"",guardian_phone:t.guardian_phone||"",phone_number:t.phone_number||"",address:t.address||"",postcode:t.postcode||"",city:t.city||"",state:t.state||"",school_name:t.school_name||"",school_class:t.school_class||""}),t.ic_number){const n=t.ic_number.replace(/\D/g,"").slice(0,12);if(n.length>=2){const l=parseInt(n.substring(0,2)),i=new Date().getFullYear(),o=i%100,u=l>o?1900+l:2e3+l,p=i-u;s(j=>({...j,age:p}))}}}else v(null),k();w(!0)},f=()=>{w(!1),v(null),k()},q=t=>{t.preventDefault(),console.log("=== FORM SUBMITTED ==="),console.log("Current form data:",r),console.log("Editing child:",d),d?r.belt_certificate?$.post(route("children.update",d.id),{_method:"PUT",...r},{preserveScroll:!0,onSuccess:()=>f(),onError:a=>{console.error("Validation errors:",a)}}):U(route("children.update",d.id),{preserveScroll:!0,onSuccess:()=>f(),onError:a=>{console.error("Validation errors:",a)}}):Y(route("children.store"),{preserveScroll:!0,onSuccess:()=>f(),onError:a=>{console.error("Validation errors:",a)}})},B=t=>{window.location.href=route("children.payment",t)},I=t=>C.find(a=>a.value===t)?.label||t;return e.jsxs(K,{user:N.user,header:e.jsx("h2",{className:"text-xl sm:text-2xl font-semibold leading-tight text-zinc-900",children:"Pengurusan Peserta"}),children:[e.jsx(F,{title:"Nama Peserta"}),e.jsx("div",{className:"py-6 sm:py-12 bg-zinc-50 min-h-screen",children:e.jsxs("div",{className:"mx-auto max-w-7xl px-4 sm:px-6",children:[e.jsxs("div",{className:"mb-4 sm:mb-6 flex flex-col sm:flex-row sm:justify-between sm:items-center gap-3",children:[e.jsx("h3",{className:"text-xl sm:text-2xl font-bold text-zinc-900",children:"Nama Peserta"}),e.jsx("button",{onClick:()=>y(),className:"px-4 py-2 bg-black text-white rounded-lg hover:bg-zinc-800 transition-colors text-sm font-medium w-full sm:w-auto",children:"+ Tambah Peserta"})]}),b.length===0?e.jsxs("div",{className:"bg-white rounded-xl border border-zinc-200 shadow-sm p-12 text-center",children:[e.jsx("p",{className:"text-zinc-500",children:"Tiada peserta didaftarkan lagi."}),e.jsx("button",{onClick:()=>y(),className:"mt-4 px-4 py-2 bg-black text-white rounded-lg hover:bg-zinc-800 transition-colors text-sm font-medium",children:"Tambah Peserta Pertama"})]}):e.jsx("div",{className:"bg-white rounded-xl border border-zinc-200 shadow-sm overflow-hidden",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-zinc-200",children:[e.jsx("thead",{className:"bg-zinc-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-zinc-500 uppercase tracking-wider",children:"Nama"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-zinc-500 uppercase tracking-wider",children:"No. Siri"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-zinc-500 uppercase tracking-wider",children:"Pusat Latihan"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-zinc-500 uppercase tracking-wider",children:"No Kad Pengenalan"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-zinc-500 uppercase tracking-wider",children:"Kategori"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-zinc-500 uppercase tracking-wider",children:"Status"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-zinc-500 uppercase tracking-wider",children:"Status Pembayaran"}),e.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-zinc-500 uppercase tracking-wider",children:"Tindakan"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-zinc-200",children:b.map(t=>e.jsxs("tr",{className:"hover:bg-zinc-50 transition-colors",children:[e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[e.jsx("div",{className:"text-sm font-medium text-zinc-900",children:t.name}),e.jsx("div",{className:"text-xs text-zinc-500",children:I(t.belt_level)})]}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("div",{className:"text-sm text-zinc-900",children:t.student?t.student.no_siri:"-"})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("div",{className:"text-sm text-zinc-900",children:t.training_center?t.training_center.name:"-"})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("div",{className:"text-sm text-zinc-900",children:t.ic_number||"-"})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("div",{className:"text-sm text-zinc-900",children:(()=>{if(!t.date_of_birth)return"-";const a=new Date(t.date_of_birth),n=new Date;let l=n.getFullYear()-a.getFullYear();const i=n.getMonth()-a.getMonth();(i<0||i===0&&n.getDate()<a.getDate())&&l--;const o=l<18?"Pelajar":"Dewasa";return e.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${l<18?"bg-purple-50 text-purple-600 border border-purple-100":"bg-blue-50 text-blue-600 border border-blue-100"}`,children:o})})()})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${t.payment_completed?"bg-emerald-50 text-emerald-600 border border-emerald-100":"bg-zinc-100 text-zinc-600 border border-zinc-200"}`,children:t.payment_completed?"Aktif":"Tidak Aktif"})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:t.payment_completed?e.jsx("div",{children:e.jsx("span",{className:"px-2 py-1 text-xs font-medium rounded-full bg-emerald-50 text-emerald-600 border border-emerald-100",children:"Sudah Bayar"})}):t.payment_method==="offline"&&t.payment_reference?e.jsx("span",{className:"px-2 py-1 text-xs font-medium rounded-full bg-blue-50 text-blue-600 border border-blue-100",children:"Menunggu Pengesahan"}):e.jsx("span",{className:"px-2 py-1 text-xs font-medium rounded-full bg-amber-50 text-amber-600 border border-amber-100",children:"Belum Bayar"})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:e.jsxs("div",{className:"flex justify-end gap-2",children:[t.belt_certificate&&e.jsx("a",{href:`/storage/${t.belt_certificate}`,target:"_blank",rel:"noopener noreferrer",className:"px-3 py-1.5 text-xs border border-green-300 bg-green-50 rounded-lg text-green-700 hover:bg-green-100 transition-colors",title:"Lihat Sijil",children:"ðŸ“„ Sijil"}),t.payment_completed&&e.jsx("a",{href:route("children.payment.receipt",t.id),target:"_blank",rel:"noopener noreferrer",className:"px-3 py-1.5 text-xs border border-purple-300 bg-purple-50 rounded-lg text-purple-700 hover:bg-purple-100 transition-colors",title:"Muat Turun Resit",children:"ðŸ§¾ Resit"}),e.jsx("button",{onClick:()=>y(t),className:"px-3 py-1.5 text-xs border border-zinc-300 rounded-lg text-zinc-700 hover:bg-zinc-50 transition-colors",children:"Edit"}),!M(t)&&e.jsx("button",{onClick:()=>B(t.id),className:"px-3 py-1.5 text-xs bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"Bayar"})]})})]},t.id))})]})})})]})}),D&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-xl p-4 sm:p-6 max-w-md w-full max-h-[90vh] overflow-y-auto",children:[e.jsx("h3",{className:"text-lg font-bold text-zinc-900 mb-4",children:d?"Edit Maklumat Peserta":"Tambah Peserta Baru"}),e.jsx("form",{onSubmit:q,children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex justify-between items-center border-b border-zinc-200 pb-2",children:[e.jsx("h4",{className:"font-bold text-zinc-900",children:"MAKLUMAT WARIS"}),e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer group",children:[e.jsx("input",{type:"checkbox",onChange:t=>{if(t.target.checked)if(b&&b.length>0){const a=b[0];s(n=>({...n,guardian_name:a.guardian_name||"",guardian_occupation:a.guardian_occupation||"",guardian_ic_number:a.guardian_ic_number||"",guardian_age:a.guardian_age||"",guardian_phone:a.guardian_phone||"",address:a.address||"",postcode:a.postcode||"",city:a.city||"",state:a.state||""}))}else s(a=>({...a,guardian_name:N.user.name.toUpperCase(),guardian_phone:N.user.phone||""}));else s(a=>({...a,guardian_name:"",guardian_occupation:"",guardian_ic_number:"",guardian_age:"",guardian_phone:""}))},className:"w-4 h-4 text-blue-600 border-zinc-300 rounded focus:ring-blue-500"}),e.jsx("span",{className:"text-xs text-zinc-500 group-hover:text-zinc-700 transition-colors",children:"Sama seperti profil/sebelumnya"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-zinc-700 mb-1",children:"Nama Waris"}),e.jsx("input",{type:"text",value:r.guardian_name,onChange:t=>s("guardian_name",t.target.value.toUpperCase()),className:"w-full px-3 py-2 border border-zinc-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent uppercase",required:!0}),c.guardian_name&&e.jsx("p",{className:"text-red-500 text-xs mt-1",children:c.guardian_name})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-zinc-700 mb-1",children:"Pekerjaan"}),e.jsx("input",{type:"text",value:r.guardian_occupation,onChange:t=>s("guardian_occupation",t.target.value.toUpperCase()),className:"w-full px-3 py-2 border border-zinc-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent uppercase",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-zinc-700 mb-1",children:"No Kad Pengenalan"}),e.jsx("input",{type:"text",value:r.guardian_ic_number,onChange:t=>{const a=t.target.value.replace(/\D/g,"").slice(0,12);let n=r.guardian_age;if(a.length>=2){const l=parseInt(a.substring(0,2)),i=new Date().getFullYear(),o=i%100,u=l>o?1900+l:2e3+l;n=i-u}s(l=>({...l,guardian_ic_number:a,guardian_age:n}))},className:"w-full px-3 py-2 border border-zinc-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Contoh: 811010011234",maxLength:"12",required:!0}),e.jsx("p",{className:"text-xs text-zinc-500 mt-1",children:"12 digit sahaja, tanpa simbol (Umur akan dikira automatik)"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-zinc-700 mb-1",children:"Umur"}),e.jsx("input",{type:"number",value:r.guardian_age,onChange:t=>s("guardian_age",t.target.value),className:"w-full px-3 py-2 border border-zinc-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",readOnly:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-zinc-700 mb-1",children:"No Telefon"}),e.jsx("input",{type:"tel",value:r.guardian_phone,onChange:t=>s("guardian_phone",t.target.value.replace(/\D/g,"").slice(0,11)),className:"w-full px-3 py-2 border border-zinc-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Contoh: 0123456789",maxLength:"11",required:!0}),e.jsx("p",{className:"text-xs text-zinc-500 mt-1",children:"Nombor sahaja, maksimum 11 digit"})]})]}),e.jsx("hr",{className:"border-4 border-zinc-100"}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h4",{className:"font-bold text-zinc-900 border-b border-zinc-200 pb-2",children:"MAKLUMAT PESERTA"}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-zinc-700 mb-1",children:"Nama Penuh"}),e.jsx("input",{type:"text",value:r.name,onChange:t=>s("name",t.target.value.toUpperCase()),className:"w-full px-3 py-2 border border-zinc-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent uppercase",required:!0}),c.name&&e.jsx("p",{className:"text-red-500 text-xs mt-1",children:c.name})]}),e.jsx("div",{className:"grid grid-cols-1 gap-4",children:e.jsxs("div",{className:"grid grid-cols-1 gap-4",children:[e.jsxs("div",{className:"grid grid-cols-4 gap-4",children:[e.jsxs("div",{className:"col-span-3",children:[e.jsx("label",{className:"block text-sm font-medium text-zinc-700 mb-1",children:"No Kad Pengenalan"}),e.jsx("input",{type:"text",value:r.ic_number,onChange:t=>{const a=t.target.value.replace(/\D/g,"").slice(0,12);let n=r.date_of_birth,l=r.age;if(a.length>=6){const i=parseInt(a.substring(0,2)),o=a.substring(2,4),u=a.substring(4,6),p=new Date().getFullYear(),j=p%100,g=i>j?1900+i:2e3+i;!isNaN(g)&&parseInt(o)>=1&&parseInt(o)<=12&&parseInt(u)>=1&&parseInt(u)<=31&&(n=`${g}-${o}-${u}`,l=p-g)}s(i=>({...i,ic_number:a,date_of_birth:n,age:l}))},className:"w-full px-3 py-2 border border-zinc-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Contoh: 150101011234",maxLength:"12",required:!0}),e.jsx("p",{className:"text-xs text-zinc-500 mt-1",children:"12 digit sahaja, tanpa simbol"}),c.ic_number&&e.jsx("p",{className:"text-red-500 text-xs mt-1",children:c.ic_number})]}),e.jsxs("div",{className:"col-span-1",children:[e.jsx("label",{className:"block text-sm font-medium text-zinc-700 mb-1",children:"Umur"}),e.jsx("input",{type:"number",value:r.age,onChange:t=>s("age",t.target.value),className:"w-full px-3 py-2 border border-zinc-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent bg-zinc-50",readOnly:!0})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-zinc-700 mb-1",children:"Tarikh Lahir"}),e.jsx("input",{type:"date",value:r.date_of_birth,onChange:t=>s("date_of_birth",t.target.value),className:"w-full px-3 py-2 border border-zinc-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent bg-zinc-50 cursor-not-allowed",readOnly:!0}),e.jsx("p",{className:"text-xs text-zinc-500 mt-1",children:"automatik mengikut no kad pengenalan"})]})]})}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between items-center mb-1",children:[e.jsx("label",{className:"block text-sm font-medium text-zinc-700",children:"No Telefon"}),e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[e.jsx("input",{type:"checkbox",onChange:t=>{t.target.checked?s("phone_number",r.guardian_phone):s("phone_number","")},className:"w-4 h-4 text-blue-600 border-zinc-300 rounded focus:ring-blue-500"}),e.jsx("span",{className:"text-xs text-zinc-500",children:"Sama seperti waris"})]})]}),e.jsx("input",{type:"tel",value:r.phone_number,onChange:t=>s("phone_number",t.target.value.replace(/\D/g,"").slice(0,11)),className:"w-full px-3 py-2 border border-zinc-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Contoh: 0123456789",maxLength:"11",required:!0}),e.jsx("p",{className:"text-xs text-zinc-500 mt-1",children:"Nombor sahaja, maksimum 11 digit"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-zinc-700 mb-1",children:"Alamat Rumah"}),e.jsx("textarea",{rows:"2",value:r.address,onChange:t=>s("address",t.target.value.toUpperCase()),className:"w-full px-3 py-2 border border-zinc-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent resize-none uppercase",required:!0})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-zinc-700 mb-1",children:"Poskod"}),e.jsx("input",{type:"text",value:r.postcode,onChange:t=>s("postcode",t.target.value),className:"w-full px-3 py-2 border border-zinc-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-zinc-700 mb-1",children:"Bandar"}),e.jsx("input",{type:"text",value:r.city,onChange:t=>s("city",t.target.value.toUpperCase()),className:"w-full px-3 py-2 border border-zinc-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent uppercase",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-zinc-700 mb-1",children:"Negeri"}),e.jsxs("select",{value:r.state,onChange:t=>s("state",t.target.value),className:"w-full px-3 py-2 border border-zinc-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:!0,children:[e.jsx("option",{value:"",children:"Pilih Negeri"}),T.map(t=>e.jsx("option",{value:t,children:t},t))]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-zinc-700 mb-1",children:"Nama Sekolah"}),e.jsx("input",{type:"text",value:r.school_name,onChange:t=>s("school_name",t.target.value.toUpperCase()),className:"w-full px-3 py-2 border border-zinc-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent uppercase",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-zinc-700 mb-1",children:"Kelas"}),e.jsx("input",{type:"text",value:r.school_class,onChange:t=>s("school_class",t.target.value.toUpperCase()),className:"w-full px-3 py-2 border border-zinc-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent uppercase",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-zinc-700 mb-1",children:"Pusat Latihan"}),e.jsxs("select",{value:r.training_center_id,onChange:t=>s("training_center_id",t.target.value),className:"w-full px-3 py-2 border border-zinc-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:!0,children:[e.jsx("option",{value:"",children:"Pilih Pusat Latihan"}),L.map(t=>e.jsx("option",{value:t.id,children:t.name},t.id))]}),c.training_center_id&&e.jsx("p",{className:"text-red-500 text-xs mt-1",children:c.training_center_id})]}),e.jsxs("div",{className:"pt-4 border-t border-zinc-200",children:[e.jsx("label",{className:"block text-sm font-medium text-zinc-700 mb-3",children:"Adakah anda dari kelab lain?"}),e.jsxs("div",{className:"flex gap-4",children:[e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"radio",name:"from_other_club",checked:r.from_other_club===!0,onChange:()=>s("from_other_club",!0),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-zinc-300"}),e.jsx("span",{className:"ml-2 text-sm text-zinc-700",children:"Ya"})]}),e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"radio",name:"from_other_club",checked:r.from_other_club===!1,onChange:()=>{s(t=>({...t,from_other_club:!1,belt_level:"white"}))},className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-zinc-300"}),e.jsx("span",{className:"ml-2 text-sm text-zinc-700",children:"Tidak"})]})]})]}),r.from_other_club&&e.jsxs("div",{className:"space-y-4 pl-4 border-l-2 border-blue-200 bg-blue-50 p-4 rounded-r-lg",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-zinc-700 mb-1",children:"Tahap Tali Pinggang"}),e.jsx("select",{value:r.belt_level,onChange:t=>s("belt_level",t.target.value),className:"w-full px-3 py-2 border border-zinc-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:C.map(t=>e.jsx("option",{value:t.value,children:t.label},t.value))}),c.belt_level&&e.jsx("p",{className:"text-red-500 text-xs mt-1",children:c.belt_level})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-zinc-700 mb-1",children:"Isikan No. TM"}),e.jsx("input",{type:"text",value:r.tm_number,onChange:t=>s("tm_number",t.target.value),className:"w-full px-3 py-2 border border-zinc-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent bg-white",placeholder:"Masukkan No. TM",required:!0}),c.tm_number&&e.jsx("p",{className:"text-red-500 text-xs mt-1",children:c.tm_number})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-zinc-700 mb-2",children:"Upload sijil ujian tali pinggang terkini"}),d&&d.belt_certificate&&e.jsxs("div",{className:"mb-3 p-3 bg-green-50 border border-green-200 rounded-lg",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-green-600",children:"ðŸ“„"}),e.jsx("span",{className:"text-sm text-green-700 font-medium",children:"Sijil Sedia Ada"})]}),e.jsx("a",{href:`/storage/${d.belt_certificate}`,target:"_blank",rel:"noopener noreferrer",className:"text-xs px-3 py-1 bg-green-600 text-white rounded hover:bg-green-700 transition-colors",children:"Lihat Sijil"})]}),e.jsx("p",{className:"text-xs text-green-600 mt-1",children:"Upload fail baru untuk menggantikan sijil sedia ada"})]}),e.jsx("input",{type:"file",onChange:t=>s("belt_certificate",t.target.files[0]),className:"w-full px-3 py-2 border border-zinc-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent bg-white file:mr-4 file:py-2 file:px-4 file:rounded-lg file:border-0 file:text-sm file:font-semibold file:bg-blue-50 file:text-blue-700 hover:file:bg-blue-100",accept:"image/*,.pdf",required:!d||!d.belt_certificate}),e.jsx("p",{className:"text-xs text-zinc-500 mt-1",children:"Format: JPG, PNG, atau PDF (Maks: 2MB)"}),c.belt_certificate&&e.jsx("p",{className:"text-red-500 text-xs mt-1",children:c.belt_certificate})]})]})]}),e.jsxs("div",{className:"flex flex-col-reverse sm:flex-row justify-end gap-3 pt-2",children:[e.jsx("button",{type:"button",onClick:f,className:"px-4 py-2 border border-zinc-300 rounded-lg text-zinc-700 hover:bg-zinc-50 transition-colors",children:"Batal"}),e.jsx("button",{type:"submit",disabled:z,className:"px-4 py-2 bg-black text-white rounded-lg hover:bg-zinc-800 transition-colors disabled:opacity-50",children:z?"Menyimpan...":"Simpan"})]})]})})]})}),x.show&&e.jsx("div",{className:"fixed inset-0 flex items-center justify-center z-[100] pointer-events-none px-4",children:e.jsxs("div",{className:`bg-white rounded-xl shadow-2xl border ${x.type==="success"?"border-emerald-100":"border-red-100"} p-6 max-w-sm w-full transform transition-all duration-300 pointer-events-auto relative animate-fade-in-up`,children:[e.jsx("button",{onClick:()=>h(t=>({...t,show:!1})),className:"absolute top-2 right-2 text-zinc-400 hover:text-zinc-600 p-1 rounded-full hover:bg-zinc-100 transition-colors",children:e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M6 18L18 6M6 6l12 12"})})}),e.jsxs("div",{className:"flex flex-col items-center text-center",children:[e.jsx("div",{className:`w-16 h-16 ${x.type==="success"?"bg-emerald-100 text-emerald-600":"bg-red-100 text-red-600"} rounded-full flex items-center justify-center mb-4`,children:x.type==="success"?e.jsx("svg",{className:"w-8 h-8",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M5 13l4 4L19 7"})}):e.jsx("svg",{className:"w-8 h-8",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M6 18L18 6M6 6l12 12"})})}),e.jsx("h3",{className:"text-xl font-bold text-zinc-900 mb-2",children:x.type==="success"?"Pembayaran Berjaya!":"Pembayaran Gagal!"}),e.jsx("p",{className:"text-zinc-600",children:x.message})]})]})})]})}export{V as default};
