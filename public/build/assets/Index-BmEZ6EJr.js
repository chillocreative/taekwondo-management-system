import{b as u,r as l,j as e,H as p,a as b}from"./app-B1hHKSJA.js";import{A as j}from"./AuthenticatedLayout-C4cyUgsh.js";import"./transition-DO-s8GC-.js";function v({auth:x,feesData:d}){const{flash:r}=u().props,[a,n]=l.useState({show:!1,type:"success",message:""}),[i,c]=l.useState(null);l.useEffect(()=>{if(r?.success?n({show:!0,type:"success",message:r.success}):r?.error&&n({show:!0,type:"error",message:r.error}),r?.success||r?.error){const t=setTimeout(()=>{n(s=>({...s,show:!1}))},3e3);return()=>clearTimeout(t)}},[r]);const m=(t,s,o)=>{confirm(`Anda pasti mahu membayar yuran untuk bulan ${s}?`)&&b.post(route("fees.pay"),{child_id:t,month:s,amount:o})},h=t=>{c(i===t?null:t)};return e.jsxs(j,{user:x.user,header:e.jsx("h2",{className:"text-xl sm:text-2xl font-semibold leading-tight text-zinc-900",children:"Yuran Pengajian"}),children:[e.jsx(p,{title:"Yuran Pengajian"}),e.jsx("div",{className:"py-6 sm:py-12 bg-zinc-50 min-h-screen",children:e.jsx("div",{className:"mx-auto max-w-7xl px-4 sm:px-6",children:d.length===0?e.jsx("div",{className:"bg-white p-8 rounded-xl border border-zinc-200 text-center shadow-sm",children:e.jsx("p",{className:"text-zinc-500",children:'Tiada rekod peserta dijumpai. Sila tambah peserta terlebih dahulu di menu "Nama Peserta".'})}):e.jsx("div",{className:"space-y-4",children:d.map(t=>e.jsxs("div",{className:"bg-white rounded-xl border border-zinc-200 shadow-sm overflow-hidden",children:[e.jsxs("div",{className:"px-6 py-4 bg-zinc-50 border-b border-zinc-200 flex justify-between items-center cursor-pointer hover:bg-zinc-100 transition-colors",onClick:()=>h(t.id),children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-bold text-zinc-900",children:t.name}),e.jsxs("p",{className:"text-sm text-zinc-500",children:["No. Siri: ",t.no_siri]})]}),e.jsx("div",{className:"text-zinc-400",children:e.jsx("svg",{className:`w-6 h-6 transform transition-transform duration-200 ${i===t.id?"rotate-180":""}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M19 9l-7 7-7-7"})})})]}),i===t.id&&e.jsx("div",{className:"overflow-x-auto",children:t.is_special_center?e.jsxs("div",{className:"px-6 py-8 text-center bg-white",children:[e.jsx("div",{className:"w-16 h-16 bg-blue-50 text-blue-600 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx("svg",{className:"w-8 h-8",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"})})}),e.jsx("h4",{className:"text-lg font-bold text-zinc-900 mb-1",children:"Yuran di bayar kepada pihak sekolah"}),e.jsx("p",{className:"text-zinc-500 text-sm max-w-md mx-auto",children:"Pembayaran yuran bulanan untuk peserta di pusat latihan ini diuruskan terus oleh pihak sekolah."})]}):e.jsxs("table",{className:"min-w-full divide-y divide-zinc-200",children:[e.jsx("thead",{className:"bg-white",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-zinc-500 uppercase tracking-wider",children:"Yuran Bulan"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-zinc-500 uppercase tracking-wider",children:"Tarikh Akhir"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-zinc-500 uppercase tracking-wider",children:"Status"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-zinc-500 uppercase tracking-wider",children:"Tindakan"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-zinc-200",children:t.fees.map((s,o)=>e.jsxs("tr",{className:`hover:bg-zinc-50 transition-colors ${s.is_overdue?"bg-red-50":""}`,children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-zinc-900",children:s.month}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-zinc-600",children:s.due_date}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:`px-3 py-1 text-xs font-medium rounded-full ${s.status==="Sudah Dibayar"?"bg-emerald-50 text-emerald-600 border border-emerald-100":s.status==="Tertunggak"?"bg-red-50 text-red-600 border border-red-200":"bg-amber-50 text-amber-600 border border-amber-100"}`,children:s.status})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:s.hide_action?e.jsx("span",{className:"text-zinc-300 text-xs"}):s.is_paid?e.jsxs("div",{className:"flex flex-col items-start gap-1",children:[e.jsxs("span",{className:"text-emerald-600 text-xs",children:["âœ“ ",s.paid_date]}),s.receipt_url&&e.jsxs("a",{href:s.receipt_url,target:"_blank",rel:"noopener noreferrer",className:"px-4 py-2 text-xs font-bold border border-zinc-300 rounded-lg hover:bg-zinc-50 transition-colors flex items-center gap-1 shadow-sm text-zinc-700 bg-white",children:[e.jsx("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M7 21h10a2 2 0 002-2V9.414a1 1 0 00-.293-.707l-5.414-5.414A1 1 0 0012.586 2H7a2 2 0 00-2 2v14a2 2 0 002 2z"})}),"Resit"]})]}):s.can_pay?e.jsx("button",{onClick:()=>m(t.id,s.month,s.amount),className:`px-4 py-2 text-white text-xs font-bold rounded-lg transition-colors shadow-sm ${s.is_overdue?"bg-red-600 hover:bg-red-700":"bg-black hover:bg-zinc-800"}`,children:"BAYAR"}):e.jsx("span",{className:"text-zinc-400 text-xs",children:"-"})})]},o))})]})})]},t.id))})})}),a.show&&e.jsx("div",{className:"fixed inset-0 flex items-center justify-center z-[100] pointer-events-none px-4",children:e.jsxs("div",{className:`bg-white rounded-xl shadow-2xl border ${a.type==="success"?"border-emerald-100":"border-red-100"} p-6 max-w-sm w-full transform transition-all duration-300 pointer-events-auto relative animate-fade-in-up`,children:[e.jsx("button",{onClick:()=>n(t=>({...t,show:!1})),className:"absolute top-2 right-2 text-zinc-400 hover:text-zinc-600 p-1 rounded-full hover:bg-zinc-100 transition-colors",children:e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M6 18L18 6M6 6l12 12"})})}),e.jsxs("div",{className:"flex flex-col items-center text-center",children:[e.jsx("div",{className:`w-16 h-16 ${a.type==="success"?"bg-emerald-100 text-emerald-600":"bg-red-100 text-red-600"} rounded-full flex items-center justify-center mb-4`,children:a.type==="success"?e.jsx("svg",{className:"w-8 h-8",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M5 13l4 4L19 7"})}):e.jsx("svg",{className:"w-8 h-8",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M6 18L18 6M6 6l12 12"})})}),e.jsx("h3",{className:"text-xl font-bold text-zinc-900 mb-2",children:a.type==="success"?"Pembayaran Berjaya!":"Pembayaran Gagal!"}),e.jsx("p",{className:"text-zinc-600",children:a.message})]})]})})]})}export{v as default};
