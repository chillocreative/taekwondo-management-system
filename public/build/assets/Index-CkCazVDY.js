import{u as f,r as c,j as e,H as g}from"./app-Buwp7dlR.js";import{A as j}from"./AuthenticatedLayout-CkErU47J.js";import"./transition-Bek3jcz5.js";function z({auth:d,serverUrl:n}){const{data:r,setData:i,post:o,processing:m,errors:t,reset:x}=f({phone:"",message:"Hello! This is a test message from TSMS WhatsApp Server."}),[s,l]=c.useState({connected:!1,status:"checking",qr:null});c.useEffect(()=>{const a=async()=>{try{const b=await(await fetch(`${n}/whatsapp-api/status`)).json();l(b)}catch{l({connected:!1,status:"offline",qr:null})}};a();const h=setInterval(a,5e3);return()=>clearInterval(h)},[]);const u=a=>{a.preventDefault(),o(route("admin.whatsapp.test"),{onSuccess:()=>x("phone")})};return e.jsxs(j,{user:d.user,header:e.jsx("h2",{className:"font-semibold text-xl text-white leading-tight",children:"Pengurusan WhatsApp"}),children:[e.jsx(g,{title:"WhatsApp Management"}),e.jsx("div",{className:"py-12 bg-zinc-50 min-h-screen",children:e.jsx("div",{className:"max-w-7xl mx-auto sm:px-6 lg:px-8",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8",children:[e.jsx("div",{className:"md:col-span-1",children:e.jsxs("div",{className:"bg-white overflow-hidden shadow-xl sm:rounded-3xl p-8 border border-zinc-100 flex flex-col h-full",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-2xl font-black text-zinc-900 mb-2",children:"Status Server"}),e.jsx("p",{className:"text-zinc-500 font-medium mb-8",children:"Pantau status sambungan WhatsApp server anda."}),e.jsxs("div",{className:"flex items-center gap-4 mb-8",children:[e.jsx("div",{className:`w-4 h-4 rounded-full ${s.connected?"bg-emerald-500 animate-pulse":s.status==="starting"||s.status==="initializing"?"bg-amber-400 animate-bounce":"bg-rose-500"}`}),e.jsx("span",{className:`font-black uppercase tracking-widest text-sm ${s.connected?"text-emerald-600":s.status==="starting"||s.status==="initializing"?"text-amber-600":"text-rose-600"}`,children:s.connected?"Bersambung":s.status==="offline"?"Server Offline":s.status==="starting"||s.status==="initializing"?"Menyambung...":"Terputus"})]}),!s.connected&&e.jsx("div",{className:"flex flex-col items-center",children:s.qr?e.jsxs("div",{className:"bg-white p-4 rounded-3xl border-4 border-zinc-900 shadow-2xl mb-6 group transition-all hover:scale-105",children:[e.jsx("img",{src:s.qr,alt:"Scan to connect",className:"w-56 h-56"}),e.jsx("p",{className:"mt-4 text-center text-xs font-black text-zinc-900 uppercase tracking-widest",children:"Sila Imbas Sekarang"})]}):e.jsx("div",{className:"bg-zinc-50 w-full p-8 rounded-3xl border border-dashed border-zinc-300 flex flex-col items-center justify-center mb-6 aspect-square",children:s.status==="offline"?e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-12 h-12 bg-rose-100 text-rose-600 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})})}),e.jsx("p",{className:"text-sm font-bold text-zinc-900",children:"Server Offline"}),e.jsx("p",{className:"text-xs text-zinc-500 mt-1",children:"Sila pastikan `node whatsapp-server.js` sedang berjalan di cPanel."})]}):e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-10 h-10 border-4 border-zinc-200 border-t-zinc-900 rounded-full animate-spin mx-auto mb-4"}),e.jsx("p",{className:"text-sm font-bold text-zinc-900 italic tracking-widest",children:s.status==="starting"||s.status==="initializing"?"WhatsApp Sedang Bermula...":"Menjana Kod QR..."}),s.error&&e.jsxs("p",{className:"text-[10px] text-zinc-400 mt-4 font-mono uppercase tracking-widest",children:["Log: ",s.error]})]})})})]}),e.jsxs("div",{className:"mt-auto pt-8 border-t border-zinc-100 space-y-4",children:[e.jsxs("div",{className:"p-4 bg-zinc-50 rounded-2xl border border-zinc-100",children:[e.jsx("p",{className:"text-xs text-zinc-400 font-bold uppercase mb-1",children:"Server Endpoint"}),e.jsx("p",{className:"font-mono text-xs text-zinc-600 truncate",children:n})]}),e.jsxs("div",{className:"p-4 bg-zinc-50 rounded-2xl border border-zinc-100",children:[e.jsx("p",{className:"text-xs text-zinc-400 font-bold uppercase mb-1",children:"Status Enjin"}),e.jsx("p",{className:"font-mono text-xs text-zinc-600 uppercase",children:s.status})]})]})]})}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsxs("div",{className:"bg-white overflow-hidden shadow-xl sm:rounded-3xl p-8 border border-zinc-100",children:[e.jsx("h3",{className:"text-2xl font-black text-zinc-900 mb-2",children:"Uji Penghantaran"}),e.jsx("p",{className:"text-zinc-500 font-medium mb-8",children:"Hantar mesej ujian untuk memastikan server berfungsi dengan baik."}),e.jsxs("form",{onSubmit:u,className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-black text-zinc-700 uppercase tracking-widest mb-2",children:"Nombor Telefon"}),e.jsx("input",{type:"text",value:r.phone,onChange:a=>i("phone",a.target.value),placeholder:"Contoh: 60123456789",className:"w-full bg-zinc-50 border-zinc-200 rounded-2xl p-4 focus:ring-zinc-900 focus:border-zinc-900 transition-all font-medium"}),t.phone&&e.jsx("p",{className:"mt-2 text-sm text-rose-600 font-bold",children:t.phone}),e.jsx("p",{className:"mt-2 text-xs text-zinc-400 italic font-medium",children:"Sila sertakan kod negara tanpa simbol +. Contoh: 60123456789"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-black text-zinc-700 uppercase tracking-widest mb-2",children:"Mesej"}),e.jsx("textarea",{value:r.message,onChange:a=>i("message",a.target.value),rows:"4",className:"w-full bg-zinc-50 border-zinc-200 rounded-2xl p-4 focus:ring-zinc-900 focus:border-zinc-900 transition-all font-medium"}),t.message&&e.jsx("p",{className:"mt-2 text-sm text-rose-600 font-bold",children:t.message})]}),e.jsx("div",{className:"flex items-center justify-end",children:e.jsxs("button",{type:"submit",disabled:m||!s.connected,className:`px-8 py-4 rounded-2xl font-black text-white shadow-lg transition-all transform active:scale-95 flex items-center gap-3 ${s.connected?"bg-zinc-900 hover:bg-zinc-800 shadow-zinc-200":"bg-zinc-300 cursor-not-allowed shadow-none"}`,children:[e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 19l9 2-9-18-9 18 9-2zm0 0v-8"})}),"Hantar Mesej Ujian"]})})]})]}),e.jsxs("div",{className:"mt-8 bg-zinc-900 rounded-3xl p-8 text-white relative overflow-hidden group",children:[e.jsx("div",{className:"absolute top-0 right-0 -mr-16 -mt-16 w-64 h-64 bg-white/5 rounded-full blur-3xl group-hover:bg-white/10 transition-colors"}),e.jsxs("div",{className:"relative z-10",children:[e.jsx("div",{className:"p-3 bg-white/10 w-fit rounded-xl mb-6",children:e.jsx("svg",{className:"w-8 h-8 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"1.5",d:"M13 10V3L4 14h7v7l9-11h-7z"})})}),e.jsx("h4",{className:"text-2xl font-black mb-2",children:"Automasi Pembayaran"}),e.jsx("p",{className:"text-zinc-400 font-medium mb-6",children:"Sistem kini dikonfigurasi untuk menghantar notifikasi WhatsApp secara automatik kepada Admin dan Ibu Bapa apabila pembayaran pendaftaran atau yuran bulanan berjaya dilakukan."}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"flex items-center gap-3 text-sm font-bold",children:[e.jsx("div",{className:"w-2 h-2 rounded-full bg-emerald-500 shadow-[0_0_8px_rgba(16,185,129,0.6)]"}),"Notifikasi Pendaftaran (Admin)"]}),e.jsxs("div",{className:"flex items-center gap-3 text-sm font-bold",children:[e.jsx("div",{className:"w-2 h-2 rounded-full bg-emerald-500 shadow-[0_0_8px_rgba(16,185,129,0.6)]"}),"Resit Pendaftaran (Ibu Bapa)"]}),e.jsxs("div",{className:"flex items-center gap-3 text-sm font-bold",children:[e.jsx("div",{className:"w-2 h-2 rounded-full bg-emerald-500 shadow-[0_0_8px_rgba(16,185,129,0.6)]"}),"Resit Yuran Bulanan (Ibu Bapa)"]}),e.jsxs("div",{className:"flex items-center gap-3 text-sm font-bold",children:[e.jsx("div",{className:"w-2 h-2 rounded-full bg-emerald-500 shadow-[0_0_8px_rgba(16,185,129,0.6)]"}),"Peringatan Yuran Bulanan"]}),e.jsxs("div",{className:"flex items-center gap-3 text-sm font-bold",children:[e.jsx("div",{className:"w-2 h-2 rounded-full bg-emerald-500 shadow-[0_0_8px_rgba(16,185,129,0.6)]"}),"Amaran Ketidakhadiran"]}),e.jsxs("div",{className:"flex items-center gap-3 text-sm font-bold opacity-50",children:[e.jsx("div",{className:"w-2 h-2 rounded-full bg-emerald-500"}),"Update Grading (Akan Datang)"]})]})]})]})]})]})})})]})}export{z as default};
