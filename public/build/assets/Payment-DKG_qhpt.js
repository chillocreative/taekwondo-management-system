import{r as x,u,j as e,H as _,a as j}from"./app-CajWK6Yg.js";import{A as v}from"./AuthenticatedLayout-SZSmBfqU.js";import{T as N}from"./Toast-CISNsbYF.js";import"./transition-4TztYPwI.js";function S({auth:p,settings:t,flash:o}){const[y,l]=x.useState(!1),[i,d]=x.useState(null);x.useEffect(()=>{o?.success?d({message:o.success,type:"success"}):o?.error&&d({message:o.error,type:"error"})},[o]);const{data:s,setData:r,post:h,processing:m,errors:n}=u({provider:t?.provider||"toyyibpay",is_sandbox:t?.is_sandbox??!0,secret_key:t?.secret_key||"",category_code:t?.category_code||"",is_active:t?.is_active??!1,bayarcash_access_token:t?.bayarcash_access_token||"",bayarcash_portal_key:t?.bayarcash_portal_key||"",bayarcash_is_sandbox:t?.bayarcash_is_sandbox??!0,bayarcash_is_active:t?.bayarcash_is_active??!1,senangpay_merchant_id:t?.senangpay_merchant_id||"",senangpay_secret_key:t?.senangpay_secret_key||"",senangpay_is_sandbox:t?.senangpay_is_sandbox??!0,senangpay_is_active:t?.senangpay_is_active??!1}),c=u({catname:"",catdescription:""}),b=a=>{a.preventDefault(),h(route("settings.payment.update"))},g=a=>{a.preventDefault(),c.post(route("settings.payment.create-category"),{onSuccess:()=>{l(!1),c.reset()}})},f=()=>{j.post(route("settings.payment.test"))};return e.jsxs(v,{user:p.user,header:e.jsx("h2",{className:"text-xl sm:text-2xl font-semibold leading-tight text-zinc-900",children:"Payment Settings"}),children:[e.jsx(_,{title:"Payment Settings"}),i&&e.jsx(N,{message:i.message,type:i.type,onClose:()=>d(null)}),e.jsx("div",{className:"py-6 sm:py-12 bg-zinc-50 min-h-screen",children:e.jsxs("div",{className:"mx-auto max-w-4xl px-4 sm:px-6",children:[e.jsxs("div",{className:"bg-white rounded-xl border border-zinc-200 shadow-sm p-6 mb-6",children:[e.jsxs("h3",{className:"text-lg font-bold text-zinc-900 mb-6",children:[s.provider==="toyyibpay"&&"ToyyibPay Configuration",s.provider==="bayarcash"&&"Bayarcash Configuration",s.provider==="senangpay"&&"SenangPay Configuration"]}),e.jsx("form",{onSubmit:b,children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-zinc-700 mb-2",children:"Payment Provider"}),e.jsxs("select",{value:s.provider,onChange:a=>r("provider",a.target.value),className:"w-full px-3 py-2 border border-zinc-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[e.jsx("option",{value:"toyyibpay",children:"ToyyibPay"}),e.jsx("option",{value:"bayarcash",children:"Bayarcash"}),e.jsx("option",{value:"senangpay",children:"SenangPay"})]}),e.jsx("p",{className:"text-xs text-zinc-500 mt-1",children:"Select your preferred payment gateway"})]}),s.provider==="toyyibpay"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("input",{type:"checkbox",checked:s.is_sandbox,onChange:a=>r("is_sandbox",a.target.checked),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-zinc-300 rounded"}),e.jsx("label",{className:"text-sm font-medium text-zinc-700",children:"Sandbox Mode (Development)"})]}),s.is_sandbox&&e.jsx("div",{className:"bg-amber-50 border border-amber-200 rounded-lg p-4",children:e.jsxs("p",{className:"text-sm text-amber-800",children:[e.jsx("strong",{children:"Sandbox Mode:"})," Register at"," ",e.jsx("a",{href:"https://dev.toyyibpay.com",target:"_blank",rel:"noopener noreferrer",className:"underline",children:"dev.toyyibpay.com"})," ","to get your sandbox credentials."]})}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-zinc-700 mb-2",children:"User Secret Key *"}),e.jsx("input",{type:"text",value:s.secret_key,onChange:a=>r("secret_key",a.target.value),className:"w-full px-3 py-2 border border-zinc-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent font-mono text-sm",placeholder:"e.g., w5x7srq7-rx5r-3t89-2ou2-k7361x2jewhn"}),n.secret_key&&e.jsx("p",{className:"text-red-500 text-xs mt-1",children:n.secret_key}),e.jsx("p",{className:"text-xs text-zinc-500 mt-1",children:"Get this from your ToyyibPay account settings"})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between items-center mb-2",children:[e.jsx("label",{className:"block text-sm font-medium text-zinc-700",children:"Category Code"}),e.jsx("button",{type:"button",onClick:()=>l(!0),className:"text-sm text-blue-600 hover:text-blue-800 font-medium",children:"+ Create Category"})]}),e.jsx("input",{type:"text",value:s.category_code,onChange:a=>r("category_code",a.target.value),className:"w-full px-3 py-2 border border-zinc-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent font-mono text-sm",placeholder:"e.g., j0tzqhka"}),n.category_code&&e.jsx("p",{className:"text-red-500 text-xs mt-1",children:n.category_code}),e.jsx("p",{className:"text-xs text-zinc-500 mt-1",children:"Category groups your bills together"})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("input",{type:"checkbox",checked:s.is_active,onChange:a=>r("is_active",a.target.checked),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-zinc-300 rounded"}),e.jsx("label",{className:"text-sm font-medium text-zinc-700",children:"Enable Payment Gateway"})]})]}),s.provider==="bayarcash"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("input",{type:"checkbox",checked:s.bayarcash_is_sandbox,onChange:a=>r("bayarcash_is_sandbox",a.target.checked),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-zinc-300 rounded"}),e.jsx("label",{className:"text-sm font-medium text-zinc-700",children:"Sandbox Mode (Development)"})]}),s.bayarcash_is_sandbox&&e.jsx("div",{className:"bg-amber-50 border border-amber-200 rounded-lg p-4",children:e.jsxs("p",{className:"text-sm text-amber-800",children:[e.jsx("strong",{children:"Sandbox Mode:"})," Register at"," ",e.jsx("a",{href:"https://console.bayarcash-sandbox.com",target:"_blank",rel:"noopener noreferrer",className:"underline",children:"console.bayarcash-sandbox.com"})," ","to get your sandbox credentials."]})}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-zinc-700 mb-2",children:"Personal Access Token *"}),e.jsx("input",{type:"text",value:s.bayarcash_access_token,onChange:a=>r("bayarcash_access_token",a.target.value),className:"w-full px-3 py-2 border border-zinc-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent font-mono text-sm",placeholder:"e.g., your_personal_access_token"}),n.bayarcash_access_token&&e.jsx("p",{className:"text-red-500 text-xs mt-1",children:n.bayarcash_access_token}),e.jsx("p",{className:"text-xs text-zinc-500 mt-1",children:"Get this from your Bayarcash console settings"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-zinc-700 mb-2",children:"Portal Key *"}),e.jsx("input",{type:"text",value:s.bayarcash_portal_key,onChange:a=>r("bayarcash_portal_key",a.target.value),className:"w-full px-3 py-2 border border-zinc-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent font-mono text-sm",placeholder:"e.g., your_portal_key"}),n.bayarcash_portal_key&&e.jsx("p",{className:"text-red-500 text-xs mt-1",children:n.bayarcash_portal_key}),e.jsx("p",{className:"text-xs text-zinc-500 mt-1",children:"Portal key from your Bayarcash portal settings"})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("input",{type:"checkbox",checked:s.bayarcash_is_active,onChange:a=>r("bayarcash_is_active",a.target.checked),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-zinc-300 rounded"}),e.jsx("label",{className:"text-sm font-medium text-zinc-700",children:"Enable Bayarcash Payment Gateway"})]})]}),s.provider==="senangpay"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("input",{type:"checkbox",checked:s.senangpay_is_sandbox,onChange:a=>r("senangpay_is_sandbox",a.target.checked),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-zinc-300 rounded"}),e.jsx("label",{className:"text-sm font-medium text-zinc-700",children:"Sandbox Mode (Development)"})]}),s.senangpay_is_sandbox&&e.jsx("div",{className:"bg-amber-50 border border-amber-200 rounded-lg p-4",children:e.jsxs("p",{className:"text-sm text-amber-800",children:[e.jsx("strong",{children:"Sandbox Mode:"})," Use sandbox credentials from"," ",e.jsx("a",{href:"https://app.senangpay.my",target:"_blank",rel:"noopener noreferrer",className:"underline",children:"app.senangpay.my"})," ","for testing."]})}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-zinc-700 mb-2",children:"Merchant ID *"}),e.jsx("input",{type:"text",value:s.senangpay_merchant_id,onChange:a=>r("senangpay_merchant_id",a.target.value),className:"w-full px-3 py-2 border border-zinc-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent font-mono text-sm",placeholder:"e.g., 123456789012345"}),n.senangpay_merchant_id&&e.jsx("p",{className:"text-red-500 text-xs mt-1",children:n.senangpay_merchant_id}),e.jsx("p",{className:"text-xs text-zinc-500 mt-1",children:"Get this from Menu → Settings → Profile in your SenangPay dashboard"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-zinc-700 mb-2",children:"Secret Key *"}),e.jsx("input",{type:"text",value:s.senangpay_secret_key,onChange:a=>r("senangpay_secret_key",a.target.value),className:"w-full px-3 py-2 border border-zinc-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent font-mono text-sm",placeholder:"e.g., your_secret_key"}),n.senangpay_secret_key&&e.jsx("p",{className:"text-red-500 text-xs mt-1",children:n.senangpay_secret_key}),e.jsx("p",{className:"text-xs text-zinc-500 mt-1",children:"Keep this secret! Used for hash generation and verification"})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("input",{type:"checkbox",checked:s.senangpay_is_active,onChange:a=>r("senangpay_is_active",a.target.checked),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-zinc-300 rounded"}),e.jsx("label",{className:"text-sm font-medium text-zinc-700",children:"Enable SenangPay Payment Gateway"})]})]})]})})]}),e.jsx("div",{className:"bg-white rounded-xl border border-zinc-200 shadow-sm p-6",children:e.jsxs("div",{className:"flex flex-col sm:flex-row gap-3",children:[e.jsx("button",{type:"submit",onClick:b,disabled:m,className:"flex-1 px-4 py-2 bg-black text-white rounded-lg hover:bg-zinc-800 transition-colors disabled:opacity-50 text-sm font-medium",children:m?"Saving...":"Save Settings"}),e.jsx("button",{type:"button",onClick:f,className:"px-4 py-2 border border-zinc-300 rounded-lg text-zinc-700 hover:bg-zinc-50 transition-colors text-sm font-medium",children:"Test Connection"})]})})]})}),y&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-xl p-6 max-w-md w-full",children:[e.jsx("h3",{className:"text-lg font-bold text-zinc-900 mb-4",children:"Create ToyyibPay Category"}),e.jsxs("form",{onSubmit:g,children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-zinc-700 mb-1",children:"Category Name *"}),e.jsx("input",{type:"text",value:c.data.catname,onChange:a=>c.setData("catname",a.target.value),className:"w-full px-3 py-2 border border-zinc-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent text-sm",placeholder:"e.g., Taekwondo Fees",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-zinc-700 mb-1",children:"Description *"}),e.jsx("textarea",{value:c.data.catdescription,onChange:a=>c.setData("catdescription",a.target.value),className:"w-full px-3 py-2 border border-zinc-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent text-sm",rows:"3",placeholder:"e.g., Monthly fees for Taekwondo classes",required:!0})]})]}),e.jsxs("div",{className:"mt-6 flex flex-col-reverse sm:flex-row justify-end gap-3",children:[e.jsx("button",{type:"button",onClick:()=>l(!1),className:"px-4 py-2 border border-zinc-300 rounded-lg text-zinc-700 hover:bg-zinc-50 transition-colors text-sm",children:"Cancel"}),e.jsx("button",{type:"submit",disabled:c.processing,className:"px-4 py-2 bg-black text-white rounded-lg hover:bg-zinc-800 transition-colors disabled:opacity-50 text-sm",children:c.processing?"Creating...":"Create Category"})]})]})]})})]})}export{S as default};
